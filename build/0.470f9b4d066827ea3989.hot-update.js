webpackHotUpdate(0,{

/***/ 458:
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {/* REACT HOT LOADER */ if (true) { (function () { var ReactHotAPI = __webpack_require__(5), RootInstanceProvider = __webpack_require__(6), ReactMount = __webpack_require__(4), React = __webpack_require__(0); module.makeHot = module.hot.data ? module.hot.data.makeHot : ReactHotAPI(function () { return RootInstanceProvider.getRootInstances(ReactMount); }, React); })(); } try { (function () {\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(11);\n\nvar _redux = __webpack_require__(12);\n\nvar _reactRouterDom = __webpack_require__(16);\n\nvar _actions = __webpack_require__(13);\n\nvar _shippingFunctions = __webpack_require__(248);\n\nvar _isEmpty = __webpack_require__(48);\n\nvar _isEmpty2 = _interopRequireDefault(_isEmpty);\n\nvar _SectionHeader = __webpack_require__(26);\n\nvar _SectionHeader2 = _interopRequireDefault(_SectionHeader);\n\nvar _shirt = __webpack_require__(270);\n\nvar _shirt2 = _interopRequireDefault(_shirt);\n\nvar _pants = __webpack_require__(268);\n\nvar _pants2 = _interopRequireDefault(_pants);\n\nvar _tie = __webpack_require__(272);\n\nvar _tie2 = _interopRequireDefault(_tie);\n\nvar _dress = __webpack_require__(265);\n\nvar _dress2 = _interopRequireDefault(_dress);\n\nvar _suitJacket = __webpack_require__(271);\n\nvar _suitJacket2 = _interopRequireDefault(_suitJacket);\n\nvar _supplies = __webpack_require__(553);\n\nvar _supplies2 = _interopRequireDefault(_supplies);\n\nvar _Measurements = __webpack_require__(460);\n\nvar _Measurements2 = _interopRequireDefault(_Measurements);\n\nvar _OrderComplete = __webpack_require__(84);\n\nvar _OrderComplete2 = _interopRequireDefault(_OrderComplete);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar OrdersShow = function (_Component) {\n  _inherits(OrdersShow, _Component);\n\n  function OrdersShow(props) {\n    _classCallCheck(this, OrdersShow);\n\n    var _this = _possibleConstructorReturn(this, (OrdersShow.__proto__ || Object.getPrototypeOf(OrdersShow)).call(this));\n\n    _this.state = {\n      notes: '',\n      displayNotesForm: false,\n      showMeasurements: false\n    };\n    return _this;\n  }\n\n  _createClass(OrdersShow, [{\n    key: 'refreshCurrentOrder',\n    value: function refreshCurrentOrder() {\n      var order_id = this.props.match.params.order_id;\n\n      var store_id = this.props.currentStore.id;\n      var getCurrentOrder = this.props.getCurrentOrder;\n\n      getCurrentOrder(store_id, order_id).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.refreshCurrentOrder();\n    }\n  }, {\n    key: 'componentDidUnmount',\n    value: function componentDidUnmount() {\n      console.log('\\n\\n\\n\\ncomponent will unmount!');\n    }\n  }, {\n    key: 'setNotes',\n    value: function setNotes(props) {\n      if (props.currentUser.user.roles[0].name === 'tailor') {\n        return props.currentOrder.provider_notes;\n      } else if (props.currentUser.user.roles[0].name === 'admin') {\n        return props.currentOrder.requester_notes;\n      }\n    }\n  }, {\n    key: 'filterByItemType',\n    value: function filterByItemType(item, type) {\n      return item.item_type.name == type.name;\n    }\n  }, {\n    key: 'itemTypesList',\n    value: function itemTypesList() {\n      return this.props.currentOrder.items.map(function (item) {\n        return item.item_type.name;\n      });\n    }\n  }, {\n    key: 'removeDuplicates',\n    value: function removeDuplicates(arr) {\n      return arr.filter(function (elem, index, self) {\n        return index == self.indexOf(elem);\n      });\n    }\n  }, {\n    key: 'sortItemsByType',\n    value: function sortItemsByType() {\n      var items = this.props.currentOrder.items;\n\n      var itemTypes = this.removeDuplicates(this.itemTypesList());\n      return itemTypes.reduce(function (newList, type) {\n        var filteredItems = items.filter(function (item) {\n          return item.item_type.name == type;\n        });\n\n        if (filteredItems.length > 0) {\n          var newValue = { name: type, filteredItems: filteredItems };\n          newList.push(newValue);\n        }\n        return newList;\n      }, []);\n    }\n  }, {\n    key: 'renderAlteration',\n    value: function renderAlteration(alteration, index) {\n      return _react2.default.createElement(\n        'li',\n        { key: index },\n        alteration.name\n      );\n    }\n\n    // renderItem(item, index){\n    //   const renderAlt = this.renderAlteration;\n    //\n    //   return (\n    //     <li className='type-list' key={index}>\n    //      { item.item_type.name } #{index + 1}\n    //      <ul>\n    //        { item.alterations.map(renderAlt)}\n    //      </ul>\n    //     </li>\n    //   )\n    // }\n\n  }, {\n    key: 'getImageForItemType',\n    value: function getImageForItemType(name) {\n      switch (name) {\n        case 'Pants':\n          return _pants2.default;\n        case 'Shirt':\n          return _shirt2.default;\n        case 'Dress':\n          return _dress2.default;\n        case 'Jacket':\n          return _suitJacket2.default;\n        case 'Tie':\n          return _tie2.default;\n        default:\n          return _supplies2.default;\n      }\n    }\n  }, {\n    key: 'renderList',\n    value: function renderList() {\n      var _this2 = this;\n\n      var renderAlt = this.renderAlteration;\n      return this.sortItemsByType().map(function (itemType, index) {\n        var image = _this2.getImageForItemType(itemType.name);\n        return itemType.filteredItems.map(function (item, index) {\n          return _react2.default.createElement(\n            'div',\n            { className: 'card', key: index },\n            _react2.default.createElement(\n              'div',\n              { className: 'type-heading' },\n              _react2.default.createElement('img', { className: 'item-type-image', src: image, alt: itemType.name }),\n              _react2.default.createElement(\n                'h3',\n                null,\n                item.item_type.name,\n                ' #',\n                index + 1\n              ),\n              _react2.default.createElement(\n                'ul',\n                null,\n                item.alterations.map(renderAlt)\n              )\n            )\n          );\n        });\n      });\n    }\n  }, {\n    key: 'orderNotes',\n    value: function orderNotes(party_notes) {\n      var notes = this.props.currentOrder[party_notes] || 'N/A';\n      var title = party_notes === 'provider_notes' ? 'Tailor Notes:' : 'Order Notes:';\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          'h3',\n          null,\n          title\n        ),\n        _react2.default.createElement(\n          'p',\n          { className: 'notes' },\n          notes\n        )\n      );\n    }\n  }, {\n    key: 'updateNotes',\n    value: function updateNotes(notes) {\n      this.setState({ notes: notes });\n    }\n  }, {\n    key: 'submitNotes',\n    value: function submitNotes(event) {\n      var _order;\n\n      event.preventDefault();\n      var key = this.props.currentUser.user.roles[0].name === 'tailor' ? 'provider_notes' : 'requester_notes';\n      var data = { order: (_order = {}, _defineProperty(_order, key, this.state.notes), _defineProperty(_order, 'id', this.props.currentOrder.id), _defineProperty(_order, 'store_id', this.props.currentOrder.store_id), _order) };\n      this.props.updateOrder(data).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: 'notesForm',\n    value: function notesForm() {\n      var _this3 = this;\n\n      if (this.state.displayNotesForm) {\n        var role = this.props.currentUser.user.roles[0].name;\n        var prompt = void 0;\n        var party = void 0;\n\n        if (role === 'tailor') {\n          prompt = 'Add Tailor Notes?';\n          party = 'provider_notes';\n        } else if (role === 'admin') {\n          prompt = 'Add Admin Notes?';\n          party = 'requester_notes';\n        }\n\n        return _react2.default.createElement(\n          'form',\n          { className: 'notes-form', onSubmit: function onSubmit(e) {\n              return _this3.submitNotes(e);\n            } },\n          _react2.default.createElement(\n            'label',\n            null,\n            _react2.default.createElement(\n              'h3',\n              null,\n              prompt\n            ),\n            _react2.default.createElement('br', null),\n            _react2.default.createElement('textarea', {\n              cols: 43, rows: 10,\n              defaultValue: this.props.currentOrder[party],\n              onChange: function onChange(e) {\n                return _this3.updateNotes(e.target.value);\n              } })\n          ),\n          _react2.default.createElement('br', null),\n          _react2.default.createElement('input', { className: 'short-button', type: 'submit', value: 'Submit' }),\n          _react2.default.createElement('hr', null)\n        );\n      } else {\n        return _react2.default.createElement('div', null);\n      }\n    }\n  }, {\n    key: 'checkOrderIn',\n    value: function checkOrderIn() {\n      var data = { order: { id: this.props.currentOrder.id, store_id: this.props.currentOrder.store_id, arrived: true } };\n      this.props.updateOrder(data).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: 'renderArrivedButton',\n    value: function renderArrivedButton() {\n      var _this4 = this;\n\n      if (!this.props.currentOrder.arrived) {\n        return _react2.default.createElement(\n          'div',\n          null,\n          _react2.default.createElement(\n            'button',\n            { onClick: function onClick() {\n                return _this4.checkOrderIn();\n              }, className: 'pink-button' },\n            'Check Order In'\n          )\n        );\n      }\n    }\n  }, {\n    key: 'fulfillOrder',\n    value: function fulfillOrder() {\n      var _this5 = this;\n\n      var data = { order: { id: this.props.currentOrder.id, store_id: this.props.currentOrder.store_id, fulfilled: true } };\n      this.props.updateOrder(data).then(function (res) {\n        return _this5.refreshCurrentOrder();\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: 'renderFulfillButton',\n    value: function renderFulfillButton() {\n      var _this6 = this;\n\n      var _props$currentOrder = this.props.currentOrder,\n          arrived = _props$currentOrder.arrived,\n          fulfilled = _props$currentOrder.fulfilled;\n\n      if (arrived && !fulfilled) {\n        return _react2.default.createElement(\n          'div',\n          null,\n          _react2.default.createElement(\n            'button',\n            { onClick: function onClick() {\n                return _this6.fulfillOrder();\n              }, className: 'pink-button' },\n            'Fulfill This Order'\n          )\n        );\n      } else if (arrived && fulfilled) {\n        return _react2.default.createElement(\n          'div',\n          null,\n          _react2.default.createElement(\n            'button',\n            { className: 'pink-button', disabled: true },\n            'Order Completed \\u2714\\uFE0F'\n          )\n        );\n      }\n    }\n  }, {\n    key: 'showHideNotesForm',\n    value: function showHideNotesForm() {\n      var value = !this.state.displayNotesForm;\n      this.setState({ displayNotesForm: value });\n    }\n  }, {\n    key: 'makeShippingLabel',\n    value: function makeShippingLabel(type) {\n      var _this7 = this;\n\n      var data = { shipment: { type: type, order_id: this.props.currentOrder.id } };\n      (0, _actions.createShipment)(data).then(function (res) {\n        return _this7.refreshCurrentOrder();\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: 'renderPrintLabels',\n    value: function renderPrintLabels() {\n      var _this8 = this;\n\n      var _props = this.props,\n          currentUser = _props.currentUser,\n          currentOrder = _props.currentOrder;\n\n      var role = currentUser.user.roles[0].name;\n      var shippingType = (0, _shippingFunctions.getShippingType)(role, currentOrder.type);\n      var printPrompt = (0, _shippingFunctions.getPrintButtonPrompt)(shippingType, currentOrder);\n\n      if (printPrompt.split(' ')[0] === \"Print\") {\n        var url = currentOrder[(0, _shippingFunctions.toSnakeCaseFromCamelCase)((0, _shippingFunctions.lowerCaseFirstLetter)(shippingType))].shipping_label;\n\n        return _react2.default.createElement(\n          'div',\n          null,\n          _react2.default.createElement(\n            'button',\n            { className: 'pink-button', onClick: function onClick() {\n                return window.print();\n              } },\n            printPrompt\n          ),\n          _react2.default.createElement(_OrderComplete2.default, { shippingType: shippingType })\n        );\n      } else if (printPrompt.split(' ')[0] === 'Create') {\n        return _react2.default.createElement(\n          'button',\n          { className: 'pink-button', onClick: function onClick() {\n              return _this8.makeShippingLabel(shippingType);\n            } },\n          printPrompt\n        );\n      }\n    }\n  }, {\n    key: 'renderEditOrder',\n    value: function renderEditOrder(role, orderEditPath) {\n      if (role === 'admin') {\n        return _react2.default.createElement(\n          'div',\n          null,\n          _react2.default.createElement(\n            _reactRouterDom.Link,\n            { to: orderEditPath },\n            _react2.default.createElement('input', { className: 'short-button', type: 'submit', value: 'Edit Order' })\n          )\n        );\n      }\n    }\n  }, {\n    key: 'editComponents',\n    value: function editComponents() {\n      var _this9 = this;\n\n      if (this.props.currentUser.user.roles[0].name != 'retailer') {\n        return _react2.default.createElement(\n          'div',\n          null,\n          _react2.default.createElement(\n            'button',\n            { className: 'pink-button', onClick: function onClick() {\n                return _this9.showHideNotesForm();\n              } },\n            this.state.displayNotesForm ? 'Hide' : 'Add Notes'\n          ),\n          this.notesForm(),\n          this.renderArrivedButton(),\n          this.renderFulfillButton(),\n          this.renderPrintLabels()\n        );\n      } else {\n        return _react2.default.createElement('div', null);\n      }\n    }\n  }, {\n    key: 'renderOrderDetails',\n    value: function renderOrderDetails() {\n      return _react2.default.createElement(\n        'div',\n        null,\n        this.renderList(),\n        this.orderNotes('requester_notes'),\n        this.orderNotes('provider_notes'),\n        this.editComponents()\n      );\n    }\n  }, {\n    key: 'showHideDeatilsOrCustomerMeasurementsButton',\n    value: function showHideDeatilsOrCustomerMeasurementsButton(boolean) {\n      var value = !boolean;\n      this.setState({ showMeasurements: value });\n    }\n  }, {\n    key: 'renderDetailsOrMeasurementsbutton',\n    value: function renderDetailsOrMeasurementsbutton(role, state) {\n      var _this10 = this;\n\n      if (role != 'retailer') {\n        var showMeasurements = this.state.showMeasurements;\n\n        var value = showMeasurements ? 'See Order Details' : 'See Measurements';\n        return _react2.default.createElement('input', {\n          type: 'submit',\n          value: value,\n          className: 'short-button',\n          onClick: function onClick() {\n            return _this10.showHideDeatilsOrCustomerMeasurementsButton(showMeasurements);\n          } });\n      } else {\n        return _react2.default.createElement('div', null);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props2 = this.props,\n          currentStore = _props2.currentStore,\n          currentOrder = _props2.currentOrder;\n      var customer = currentOrder.customer;\n\n      var orderEditPath = '/orders/' + currentOrder.id + '/edit';\n      var headerText = 'Orders / ' + currentStore.name + ' / #' + currentOrder.id;\n\n      if (!(0, _isEmpty2.default)(currentOrder)) {\n        var customerRoute = '/customers/' + customer.id + '/edit';\n        var mainContent = !this.state.showMeasurements ? this.renderOrderDetails() : _react2.default.createElement(_Measurements2.default, { customer: customer });\n        return _react2.default.createElement(\n          'div',\n          null,\n          _react2.default.createElement(_SectionHeader2.default, { text: headerText, linkTo: customerRoute, linkText: customer.first_name + ' ' + customer.last_name }),\n          _react2.default.createElement(\n            'div',\n            { className: 'order-show' },\n            this.renderEditOrder(this.props.currentUser.user.roles[0].name, orderEditPath),\n            this.renderDetailsOrMeasurementsbutton(this.props.currentUser.user.roles[0].name, this.state),\n            mainContent\n          )\n        );\n      } else {\n        //debugger;\n        return _react2.default.createElement(\n          'div',\n          null,\n          _react2.default.createElement(_SectionHeader2.default, { text: headerText }),\n          _react2.default.createElement(\n            'div',\n            null,\n            'Loading..'\n          )\n        );\n      }\n    }\n  }]);\n\n  return OrdersShow;\n}(_react.Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.currentUser,\n    currentStore: store.currentStore,\n    openOrders: store.storeOrders,\n    currentOrder: store.currentOrder\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return (0, _redux.bindActionCreators)({ getCurrentOrder: _actions.getCurrentOrder, updateOrder: _actions.updateOrder }, dispatch);\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(OrdersShow);\n\n/* REACT HOT LOADER */ }).call(this); } finally { if (true) { (function () { var foundReactClasses = module.hot.data && module.hot.data.foundReactClasses || false; if (module.exports && module.makeHot) { var makeExportsHot = __webpack_require__(7); if (makeExportsHot(module, __webpack_require__(0))) { foundReactClasses = true; } var shouldAcceptModule = true && foundReactClasses; if (shouldAcceptModule) { module.hot.accept(function (err) { if (err) { console.error(\"Cannot apply hot update to \" + \"OrdersShow.js\" + \": \" + err.message); } }); } } module.hot.dispose(function (data) { data.makeHot = module.makeHot; data.foundReactClasses = foundReactClasses; }); })(); } }\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)(module)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jbGllbnQvY29tcG9uZW50cy9vcmRlcnMvc2hvdy9PcmRlcnNTaG93LmpzPzFkNzEiXSwibmFtZXMiOlsiT3JkZXJzU2hvdyIsInByb3BzIiwic3RhdGUiLCJub3RlcyIsImRpc3BsYXlOb3Rlc0Zvcm0iLCJzaG93TWVhc3VyZW1lbnRzIiwib3JkZXJfaWQiLCJtYXRjaCIsInBhcmFtcyIsInN0b3JlX2lkIiwiY3VycmVudFN0b3JlIiwiaWQiLCJnZXRDdXJyZW50T3JkZXIiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJlcnIiLCJyZWZyZXNoQ3VycmVudE9yZGVyIiwiY3VycmVudFVzZXIiLCJ1c2VyIiwicm9sZXMiLCJuYW1lIiwiY3VycmVudE9yZGVyIiwicHJvdmlkZXJfbm90ZXMiLCJyZXF1ZXN0ZXJfbm90ZXMiLCJpdGVtIiwidHlwZSIsIml0ZW1fdHlwZSIsIml0ZW1zIiwibWFwIiwiYXJyIiwiZmlsdGVyIiwiZWxlbSIsImluZGV4Iiwic2VsZiIsImluZGV4T2YiLCJpdGVtVHlwZXMiLCJyZW1vdmVEdXBsaWNhdGVzIiwiaXRlbVR5cGVzTGlzdCIsInJlZHVjZSIsIm5ld0xpc3QiLCJmaWx0ZXJlZEl0ZW1zIiwibGVuZ3RoIiwibmV3VmFsdWUiLCJwdXNoIiwiYWx0ZXJhdGlvbiIsInJlbmRlckFsdCIsInJlbmRlckFsdGVyYXRpb24iLCJzb3J0SXRlbXNCeVR5cGUiLCJpdGVtVHlwZSIsImltYWdlIiwiZ2V0SW1hZ2VGb3JJdGVtVHlwZSIsImFsdGVyYXRpb25zIiwicGFydHlfbm90ZXMiLCJ0aXRsZSIsInNldFN0YXRlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImtleSIsImRhdGEiLCJvcmRlciIsInVwZGF0ZU9yZGVyIiwicm9sZSIsInByb21wdCIsInBhcnR5IiwiZSIsInN1Ym1pdE5vdGVzIiwidXBkYXRlTm90ZXMiLCJ0YXJnZXQiLCJ2YWx1ZSIsImFycml2ZWQiLCJjaGVja09yZGVySW4iLCJmdWxmaWxsZWQiLCJ0aGVuIiwiZnVsZmlsbE9yZGVyIiwic2hpcG1lbnQiLCJzaGlwcGluZ1R5cGUiLCJwcmludFByb21wdCIsInNwbGl0IiwidXJsIiwic2hpcHBpbmdfbGFiZWwiLCJ3aW5kb3ciLCJwcmludCIsIm1ha2VTaGlwcGluZ0xhYmVsIiwib3JkZXJFZGl0UGF0aCIsInNob3dIaWRlTm90ZXNGb3JtIiwibm90ZXNGb3JtIiwicmVuZGVyQXJyaXZlZEJ1dHRvbiIsInJlbmRlckZ1bGZpbGxCdXR0b24iLCJyZW5kZXJQcmludExhYmVscyIsInJlbmRlckxpc3QiLCJvcmRlck5vdGVzIiwiZWRpdENvbXBvbmVudHMiLCJib29sZWFuIiwic2hvd0hpZGVEZWF0aWxzT3JDdXN0b21lck1lYXN1cmVtZW50c0J1dHRvbiIsImN1c3RvbWVyIiwiaGVhZGVyVGV4dCIsImN1c3RvbWVyUm91dGUiLCJtYWluQ29udGVudCIsInJlbmRlck9yZGVyRGV0YWlscyIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJyZW5kZXJFZGl0T3JkZXIiLCJyZW5kZXJEZXRhaWxzT3JNZWFzdXJlbWVudHNidXR0b24iLCJtYXBTdGF0ZVRvUHJvcHMiLCJzdG9yZSIsIm9wZW5PcmRlcnMiLCJzdG9yZU9yZGVycyIsIm1hcERpc3BhdGNoVG9Qcm9wcyIsImRpc3BhdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFRQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7SUFFTUEsVTs7O0FBQ0osc0JBQVlDLEtBQVosRUFBa0I7QUFBQTs7QUFBQTs7QUFFaEIsVUFBS0MsS0FBTCxHQUFhO0FBQ1hDLGFBQU8sRUFESTtBQUVYQyx3QkFBa0IsS0FGUDtBQUdYQyx3QkFBa0I7QUFIUCxLQUFiO0FBRmdCO0FBT2pCOzs7OzBDQUVvQjtBQUFBLFVBQ1hDLFFBRFcsR0FD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SDtBQUVHLGlCQUFLbUIsaUNBQUwsQ0FBdUMsS0FBS3RHLEtBQUwsQ0FBV2lCLFdBQVgsQ0FBdUJDLElBQXZCLENBQTRCQyxLQUE1QixDQUFrQyxDQUFsQyxFQUFxQ0MsSUFBNUUsRUFBa0YsS0FBS25CLEtBQXZGLENBRkg7QUFJSWdHO0FBSko7QUFGRixTQURGO0FBWUQsT0FmRCxNQWVPO0FBQ0w7QUFDQSxlQUNFO0FBQUE7QUFBQTtBQUNFLG1FQUFlLE1BQU1GLFVBQXJCLEdBREY7QUFFRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkYsU0FERjtBQU1EO0FBQ0Y7Ozs7OztBQUdILElBQU1RLGtCQUFrQixTQUFsQkEsZUFBa0IsQ0FBQ0MsS0FBRCxFQUFXO0FBQ2pDLFNBQU87QUFDTHZGLGlCQUFhdUYsTUFBTXZGLFdBRGQ7QUFFTFIsa0JBQWMrRixNQUFNL0YsWUFGZjtBQUdMZ0csZ0JBQVlELE1BQU1FLFdBSGI7QUFJTHJGLGtCQUFjbUYsTUFBTW5GO0FBSmYsR0FBUDtBQU1ELENBUEQ7O0FBU0EsSUFBTXNGLHFCQUFxQixTQUFyQkEsa0JBQXFCLENBQUNDLFFBQUQsRUFBYztBQUN2QyxTQUFPLCtCQUFtQixFQUFDakcseUNBQUQsRUFBa0JpRCxpQ0FBbEIsRUFBbkIsRUFBbURnRCxRQUFuRCxDQUFQO0FBQ0QsQ0FGRDs7a0JBSWUseUJBQVFMLGVBQVIsRUFBeUJJLGtCQUF6QixFQUE2QzVHLFVBQTdDLEMiLCJmaWxlIjoiNDU4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBiaW5kQWN0aW9uQ3JlYXRvcnMgfSBmcm9tICdyZWR1eCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgeyBnZXRDdXJyZW50T3JkZXIsIHVwZGF0ZU9yZGVyLCBjcmVhdGVTaGlwbWVudCB9IGZyb20gJy4uLy4uLy4uL2FjdGlvbnMnO1xuaW1wb3J0IHtcbiAgZ2V0U2hpcHBpbmdUeXBlLFxuICBnZXRQcmludEJ1dHRvblByb21wdCxcbiAgbG93ZXJDYXNlRmlyc3RMZXR0ZXIsXG4gIHRvU25ha2VDYXNlRnJvbUNhbWVsQ2FzZSxcbiAgbWFrZVNoaXBwaW5nTGFiZWwsXG4gIHJlbmRlclByaW50TGFiZWxzXG59IGZyb20gJy4uLy4uL3NoaXBwaW5nL3NoaXBwaW5nRnVuY3Rpb25zJztcbmltcG9ydCBpc0VtcHR5IGZyb20gJ2xvZGFzaC9pc0VtcHR5JztcbmltcG9ydCBTZWN0aW9uSGVhZGVyIGZyb20gJy4uLy4uL1NlY3Rpb25IZWFkZXInO1xuaW1wb3J0IHNoaXJ0SW1hZ2UgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL3NoaXJ0LnBuZyc7XG5pbXBvcnQgcGFudHNJbWFnZSBmcm9tICcuLi8uLi8uLi9pbWFnZXMvcGFudHMucG5nJztcbmltcG9ydCB0aWVJbWFnZSBmcm9tICcuLi8uLi8uLi9pbWFnZXMvdGllLnBuZyc7XG5pbXBvcnQgZHJlc3NJbWFnZSBmcm9tICcuLi8uLi8uLi9pbWFnZXMvZHJlc3MucG5nJztcbmltcG9ydCBzdWl0SmFja2V0SW1hZ2UgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL3N1aXQtamFja2V0LnBuZyc7XG5pbXBvcnQgc3VwcGxpZXNJbWFnZSBmcm9tICcuLi8uLi8uLi9pbWFnZXMvc3VwcGxpZXMucG5nJztcbmltcG9ydCBNZWFzdXJlbWVudHMgZnJvbSAnLi9tZWFzdXJlbWVudHMvTWVhc3VyZW1lbnRzJztcbmltcG9ydCBPcmRlckNvbXBsZXRlIGZyb20gJy4uLy4uL3ByaW50cy9PcmRlckNvbXBsZXRlLmpzJztcblxuY2xhc3MgT3JkZXJzU2hvdyBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKXtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBub3RlczogJycsXG4gICAgICBkaXNwbGF5Tm90ZXNGb3JtOiBmYWxzZSxcbiAgICAgIHNob3dNZWFzdXJlbWVudHM6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgcmVmcmVzaEN1cnJlbnRPcmRlcigpe1xuICAgIGNvbnN0IHsgb3JkZXJfaWQgfSA9IHRoaXMucHJvcHMubWF0Y2gucGFyYW1zO1xuICAgIGNvbnN0IHN0b3JlX2lkID0gdGhpcy5wcm9wcy5jdXJyZW50U3RvcmUuaWQ7XG4gICAgY29uc3QgeyBnZXRDdXJyZW50T3JkZXIgfSA9IHRoaXMucHJvcHM7XG4gICAgZ2V0Q3VycmVudE9yZGVyKHN0b3JlX2lkLCBvcmRlcl9pZClcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpe1xuICAgIHRoaXMucmVmcmVzaEN1cnJlbnRPcmRlcigpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVW5tb3VudCgpe1xuICAgIGNvbnNvbGUubG9nKCdcXG5cXG5cXG5cXG5jb21wb25lbnQgd2lsbCB1bm1vdW50IScpXG4gIH1cblxuICBzZXROb3Rlcyhwcm9wcyl7XG4gICAgaWYgKHByb3BzLmN1cnJlbnRVc2VyLnVzZXIucm9sZXNbMF0ubmFtZSA9PT0gJ3RhaWxvcicpe1xuICAgICAgcmV0dXJuIHByb3BzLmN1cnJlbnRPcmRlci5wcm92aWRlcl9ub3RlcztcbiAgICB9IGVsc2UgaWYgKHByb3BzLmN1cnJlbnRVc2VyLnVzZXIucm9sZXNbMF0ubmFtZSA9PT0gJ2FkbWluJyl7XG4gICAgICByZXR1cm4gcHJvcHMuY3VycmVudE9yZGVyLnJlcXVlc3Rlcl9ub3RlcztcbiAgICB9XG4gIH1cblxuICBmaWx0ZXJCeUl0ZW1UeXBlKGl0ZW0sIHR5cGUpe1xuICAgIHJldHVybiBpdGVtLml0ZW1fdHlwZS5uYW1lID09IHR5cGUubmFtZTtcbiAgfVxuXG4gIGl0ZW1UeXBlc0xpc3QoKXtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jdXJyZW50T3JkZXIuaXRlbXMubWFwKGl0ZW0gPT4ge1xuICAgICAgcmV0dXJuIGl0ZW0uaXRlbV90eXBlLm5hbWVcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUR1cGxpY2F0ZXMoYXJyKXtcbiAgICByZXR1cm4gYXJyLmZpbHRlcihmdW5jdGlvbihlbGVtLCBpbmRleCwgc2VsZikge1xuICAgICAgcmV0dXJuIGluZGV4ID09IHNlbGYuaW5kZXhPZihlbGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNvcnRJdGVtc0J5VHlwZSgpe1xuICAgIGNvbnN0IHsgaXRlbXMgfSA9IHRoaXMucHJvcHMuY3VycmVudE9yZGVyO1xuICAgIGNvbnN0IGl0ZW1UeXBlcyA9IHRoaXMucmVtb3ZlRHVwbGljYXRlcyh0aGlzLml0ZW1UeXBlc0xpc3QoKSk7XG4gICAgcmV0dXJuIGl0ZW1UeXBlcy5yZWR1Y2UoKG5ld0xpc3QsIHR5cGUpPT4ge1xuICAgICAgY29uc3QgZmlsdGVyZWRJdGVtcyA9IGl0ZW1zLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW0uaXRlbV90eXBlLm5hbWUgPT0gdHlwZTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZmlsdGVyZWRJdGVtcy5sZW5ndGggPiAwKXtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB7IG5hbWU6IHR5cGUsIGZpbHRlcmVkSXRlbXMgfTtcbiAgICAgICAgbmV3TGlzdC5wdXNoKG5ld1ZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdMaXN0O1xuICAgIH0sIFtdKTtcbiAgfVxuXG4gIHJlbmRlckFsdGVyYXRpb24oYWx0ZXJhdGlvbiwgaW5kZXgpe1xuICAgIHJldHVybiA8bGkga2V5PXtpbmRleH0+e2FsdGVyYXRpb24ubmFtZX08L2xpPjtcbiAgfVxuXG4gIC8vIHJlbmRlckl0ZW0oaXRlbSwgaW5kZXgpe1xuICAvLyAgIGNvbnN0IHJlbmRlckFsdCA9IHRoaXMucmVuZGVyQWx0ZXJhdGlvbjtcbiAgLy9cbiAgLy8gICByZXR1cm4gKFxuICAvLyAgICAgPGxpIGNsYXNzTmFtZT0ndHlwZS1saXN0JyBrZXk9e2luZGV4fT5cbiAgLy8gICAgICB7IGl0ZW0uaXRlbV90eXBlLm5hbWUgfSAje2luZGV4ICsgMX1cbiAgLy8gICAgICA8dWw+XG4gIC8vICAgICAgICB7IGl0ZW0uYWx0ZXJhdGlvbnMubWFwKHJlbmRlckFsdCl9XG4gIC8vICAgICAgPC91bD5cbiAgLy8gICAgIDwvbGk+XG4gIC8vICAgKVxuICAvLyB9XG5cbiAgZ2V0SW1hZ2VGb3JJdGVtVHlwZShuYW1lKXtcbiAgICBzd2l0Y2ggKG5hbWUpe1xuICAgICAgY2FzZSAnUGFudHMnOlxuICAgICAgICByZXR1cm4gcGFudHNJbWFnZTtcbiAgICAgIGNhc2UgJ1NoaXJ0JzpcbiAgICAgICAgcmV0dXJuIHNoaXJ0SW1hZ2U7XG4gICAgICBjYXNlICdEcmVzcyc6XG4gICAgICAgIHJldHVybiBkcmVzc0ltYWdlO1xuICAgICAgY2FzZSAnSmFja2V0JzpcbiAgICAgICAgcmV0dXJuIHN1aXRKYWNrZXRJbWFnZTtcbiAgICAgIGNhc2UgJ1RpZSc6XG4gICAgICAgIHJldHVybiB0aWVJbWFnZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBzdXBwbGllc0ltYWdlO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlckxpc3QoKSB7XG4gICAgY29uc3QgcmVuZGVyQWx0ID0gdGhpcy5yZW5kZXJBbHRlcmF0aW9uO1xuICAgIHJldHVybiB0aGlzLnNvcnRJdGVtc0J5VHlwZSgpLm1hcCgoaXRlbVR5cGUsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBpbWFnZSA9IHRoaXMuZ2V0SW1hZ2VGb3JJdGVtVHlwZShpdGVtVHlwZS5uYW1lKTtcbiAgICAgIHJldHVybiBpdGVtVHlwZS5maWx0ZXJlZEl0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2FyZCcga2V5PXtpbmRleH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHlwZS1oZWFkaW5nJz5cbiAgICAgICAgICAgICAgPGltZyBjbGFzc05hbWU9J2l0ZW0tdHlwZS1pbWFnZScgc3JjPXtpbWFnZX0gYWx0PXtpdGVtVHlwZS5uYW1lfSAvPlxuICAgICAgICAgICAgICA8aDM+eyBpdGVtLml0ZW1fdHlwZS5uYW1lIH0gI3tpbmRleCArIDF9PC9oMz5cbiAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgIHsgaXRlbS5hbHRlcmF0aW9ucy5tYXAocmVuZGVyQWx0KX1cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIG9yZGVyTm90ZXMocGFydHlfbm90ZXMpe1xuICAgIGNvbnN0IG5vdGVzID0gdGhpcy5wcm9wcy5jdXJyZW50T3JkZXJbcGFydHlfbm90ZXNdIHx8ICdOL0EnO1xuICAgIGNvbnN0IHRpdGxlID0gcGFydHlfbm90ZXMgPT09ICdwcm92aWRlcl9ub3RlcycgPyAnVGFpbG9yIE5vdGVzOicgOiAnT3JkZXIgTm90ZXM6JztcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPGgzPnt0aXRsZX08L2gzPlxuICAgICAgICA8cCBjbGFzc05hbWU9J25vdGVzJz57bm90ZXN9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHVwZGF0ZU5vdGVzKG5vdGVzKXtcbiAgICB0aGlzLnNldFN0YXRlKHtub3Rlc30pO1xuICB9XG5cbiAgc3VibWl0Tm90ZXMoZXZlbnQpe1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5wcm9wcy5jdXJyZW50VXNlci51c2VyLnJvbGVzWzBdLm5hbWUgPT09ICd0YWlsb3InID8gJ3Byb3ZpZGVyX25vdGVzJyA6ICdyZXF1ZXN0ZXJfbm90ZXMnO1xuICAgIGNvbnN0IGRhdGEgPSB7IG9yZGVyOiB7W2tleV06IHRoaXMuc3RhdGUubm90ZXMsIGlkOiB0aGlzLnByb3BzLmN1cnJlbnRPcmRlci5pZCwgc3RvcmVfaWQ6IHRoaXMucHJvcHMuY3VycmVudE9yZGVyLnN0b3JlX2lkIH19O1xuICAgIHRoaXMucHJvcHMudXBkYXRlT3JkZXIoZGF0YSlcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH1cblxuICBub3Rlc0Zvcm0oKXtcbiAgICBpZiAodGhpcy5zdGF0ZS5kaXNwbGF5Tm90ZXNGb3JtKXtcbiAgICAgIGNvbnN0IHJvbGUgPSB0aGlzLnByb3BzLmN1cnJlbnRVc2VyLnVzZXIucm9sZXNbMF0ubmFtZTtcbiAgICAgIGxldCBwcm9tcHQ7XG4gICAgICBsZXQgcGFydHk7XG5cbiAgICAgIGlmIChyb2xlID09PSAndGFpbG9yJyl7XG4gICAgICAgIHByb21wdCA9ICdBZGQgVGFpbG9yIE5vdGVzPydcbiAgICAgICAgcGFydHkgPSAncHJvdmlkZXJfbm90ZXMnO1xuICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnYWRtaW4nKSB7XG4gICAgICAgIHByb21wdCA9ICdBZGQgQWRtaW4gTm90ZXM/J1xuICAgICAgICBwYXJ0eSA9ICdyZXF1ZXN0ZXJfbm90ZXMnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8Zm9ybSBjbGFzc05hbWU9J25vdGVzLWZvcm0nIG9uU3VibWl0PXsoZSkgPT4gdGhpcy5zdWJtaXROb3RlcyhlKX0+XG4gICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICA8aDM+eyBwcm9tcHQgfTwvaDM+XG4gICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgIGNvbHM9ezQzfSByb3dzPXsxMH1cbiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXt0aGlzLnByb3BzLmN1cnJlbnRPcmRlcltwYXJ0eV19XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gdGhpcy51cGRhdGVOb3RlcyhlLnRhcmdldC52YWx1ZSkgfT5cbiAgICAgICAgICAgIDwvdGV4dGFyZWE+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPSdzaG9ydC1idXR0b24nIHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIlN1Ym1pdFwiIC8+XG4gICAgICAgICAgPGhyIC8+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiA8ZGl2PjwvZGl2PjtcbiAgICB9XG4gIH1cblxuICBjaGVja09yZGVySW4oKXtcbiAgICBjb25zdCBkYXRhID0geyBvcmRlcjoge2lkOiB0aGlzLnByb3BzLmN1cnJlbnRPcmRlci5pZCwgc3RvcmVfaWQ6IHRoaXMucHJvcHMuY3VycmVudE9yZGVyLnN0b3JlX2lkLCBhcnJpdmVkOiB0cnVlIH19O1xuICAgIHRoaXMucHJvcHMudXBkYXRlT3JkZXIoZGF0YSlcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH1cblxuICByZW5kZXJBcnJpdmVkQnV0dG9uKCkge1xuICAgIGlmICghdGhpcy5wcm9wcy5jdXJyZW50T3JkZXIuYXJyaXZlZCl7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gdGhpcy5jaGVja09yZGVySW4oKX0gY2xhc3NOYW1lPSdwaW5rLWJ1dHRvbic+XG4gICAgICAgICAgICBDaGVjayBPcmRlciBJblxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgZnVsZmlsbE9yZGVyKCl7XG4gICAgY29uc3QgZGF0YSA9IHsgb3JkZXI6IHtpZDogdGhpcy5wcm9wcy5jdXJyZW50T3JkZXIuaWQsIHN0b3JlX2lkOiB0aGlzLnByb3BzLmN1cnJlbnRPcmRlci5zdG9yZV9pZCwgZnVsZmlsbGVkOiB0cnVlIH19O1xuICAgIHRoaXMucHJvcHMudXBkYXRlT3JkZXIoZGF0YSlcbiAgICAgIC50aGVuKHJlcyA9PiB0aGlzLnJlZnJlc2hDdXJyZW50T3JkZXIoKSlcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH1cblxuICByZW5kZXJGdWxmaWxsQnV0dG9uKCl7XG4gICAgY29uc3Qge2Fycml2ZWQsIGZ1bGZpbGxlZH0gPSB0aGlzLnByb3BzLmN1cnJlbnRPcmRlcjtcbiAgICBpZiAoYXJyaXZlZCAmJiAhZnVsZmlsbGVkKXtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB0aGlzLmZ1bGZpbGxPcmRlcigpfSBjbGFzc05hbWU9J3BpbmstYnV0dG9uJz5cbiAgICAgICAgICAgIEZ1bGZpbGwgVGhpcyBPcmRlclxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChhcnJpdmVkICYmIGZ1bGZpbGxlZCl7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdwaW5rLWJ1dHRvbicgZGlzYWJsZWQ9e3RydWV9PlxuICAgICAgICAgICAgT3JkZXIgQ29tcGxldGVkIOKclO+4j1xuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgc2hvd0hpZGVOb3Rlc0Zvcm0oKXtcbiAgICBjb25zdCB2YWx1ZSA9ICF0aGlzLnN0YXRlLmRpc3BsYXlOb3Rlc0Zvcm07XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRpc3BsYXlOb3Rlc0Zvcm06IHZhbHVlIH0pO1xuICB9XG5cbiAgbWFrZVNoaXBwaW5nTGFiZWwodHlwZSl7XG4gICAgY29uc3QgZGF0YSA9IHsgc2hpcG1lbnQ6IHsgdHlwZSwgb3JkZXJfaWQ6IHRoaXMucHJvcHMuY3VycmVudE9yZGVyLmlkIH19O1xuICAgIGNyZWF0ZVNoaXBtZW50KGRhdGEpXG4gICAgICAudGhlbihyZXMgPT4gdGhpcy5yZWZyZXNoQ3VycmVudE9yZGVyKCkpXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICB9XG5cbiAgcmVuZGVyUHJpbnRMYWJlbHMoKXtcbiAgICBjb25zdCB7IGN1cnJlbnRVc2VyLCBjdXJyZW50T3JkZXIgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qgcm9sZSA9IGN1cnJlbnRVc2VyLnVzZXIucm9sZXNbMF0ubmFtZTtcbiAgICBjb25zdCBzaGlwcGluZ1R5cGUgPSBnZXRTaGlwcGluZ1R5cGUocm9sZSwgY3VycmVudE9yZGVyLnR5cGUpO1xuICAgIGNvbnN0IHByaW50UHJvbXB0ID0gZ2V0UHJpbnRCdXR0b25Qcm9tcHQoc2hpcHBpbmdUeXBlLCBjdXJyZW50T3JkZXIpO1xuXG5cbiAgICBpZiAocHJpbnRQcm9tcHQuc3BsaXQoJyAnKVswXSA9PT0gXCJQcmludFwiKXtcbiAgICAgIGNvbnN0IHVybCA9IGN1cnJlbnRPcmRlclt0b1NuYWtlQ2FzZUZyb21DYW1lbENhc2UobG93ZXJDYXNlRmlyc3RMZXR0ZXIoc2hpcHBpbmdUeXBlKSldLnNoaXBwaW5nX2xhYmVsO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdwaW5rLWJ1dHRvbicgb25DbGljaz17KCkgPT4gd2luZG93LnByaW50KCl9PlxuICAgICAgICAgICAge3ByaW50UHJvbXB0fVxuICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgPE9yZGVyQ29tcGxldGUgc2hpcHBpbmdUeXBlPXtzaGlwcGluZ1R5cGV9Lz5cbiAgICAgICAgICB7LyogPE9yZGVyQ29tcGxldGUgb3JkZXI9e2N1cnJlbnRPcmRlcn0gc2hpcHBpbmdUeXBlPXtzaGlwcGluZ1R5cGV9IC8+ICovfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKHByaW50UHJvbXB0LnNwbGl0KCcgJylbMF0gPT09ICdDcmVhdGUnKXtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdwaW5rLWJ1dHRvbicgb25DbGljaz17KCkgPT4gdGhpcy5tYWtlU2hpcHBpbmdMYWJlbChzaGlwcGluZ1R5cGUpfT5cbiAgICAgICAgICB7cHJpbnRQcm9tcHR9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJFZGl0T3JkZXIocm9sZSwgb3JkZXJFZGl0UGF0aCl7XG4gICAgaWYgKHJvbGUgPT09ICdhZG1pbicpe1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGluayB0bz17b3JkZXJFZGl0UGF0aH0+XG4gICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPSdzaG9ydC1idXR0b24nIHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIkVkaXQgT3JkZXJcIiAvPlxuICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgZWRpdENvbXBvbmVudHMoKXtcbiAgICBpZiAodGhpcy5wcm9wcy5jdXJyZW50VXNlci51c2VyLnJvbGVzWzBdLm5hbWUgIT0gJ3JldGFpbGVyJyl7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdwaW5rLWJ1dHRvbicgb25DbGljaz17KCkgPT4gdGhpcy5zaG93SGlkZU5vdGVzRm9ybSgpfT57dGhpcy5zdGF0ZS5kaXNwbGF5Tm90ZXNGb3JtID8gJ0hpZGUnIDogJ0FkZCBOb3Rlcyd9PC9idXR0b24+XG4gICAgICAgICAgeyB0aGlzLm5vdGVzRm9ybSgpIH1cbiAgICAgICAgICB7IHRoaXMucmVuZGVyQXJyaXZlZEJ1dHRvbigpIH1cbiAgICAgICAgICB7IHRoaXMucmVuZGVyRnVsZmlsbEJ1dHRvbigpIH1cbiAgICAgICAgICB7IHRoaXMucmVuZGVyUHJpbnRMYWJlbHMoKSB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gPGRpdj48L2Rpdj5cbiAgICB9XG4gIH1cblxuICByZW5kZXJPcmRlckRldGFpbHMoKXtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgeyB0aGlzLnJlbmRlckxpc3QoKSB9XG4gICAgICAgIHsgdGhpcy5vcmRlck5vdGVzKCdyZXF1ZXN0ZXJfbm90ZXMnKSB9XG4gICAgICAgIHsgdGhpcy5vcmRlck5vdGVzKCdwcm92aWRlcl9ub3RlcycpIH1cbiAgICAgICAgeyB0aGlzLmVkaXRDb21wb25lbnRzKCkgfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHNob3dIaWRlRGVhdGlsc09yQ3VzdG9tZXJNZWFzdXJlbWVudHNCdXR0b24oYm9vbGVhbil7XG4gICAgY29uc3QgdmFsdWUgPSAhYm9vbGVhbjtcbiAgICB0aGlzLnNldFN0YXRlKHtzaG93TWVhc3VyZW1lbnRzOiB2YWx1ZX0pO1xuICB9XG5cbiAgcmVuZGVyRGV0YWlsc09yTWVhc3VyZW1lbnRzYnV0dG9uKHJvbGUsIHN0YXRlKXtcbiAgICBpZiAocm9sZSAhPSAncmV0YWlsZXInKXtcbiAgICAgIGNvbnN0IHtzaG93TWVhc3VyZW1lbnRzfSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCB2YWx1ZSA9IHNob3dNZWFzdXJlbWVudHMgPyAnU2VlIE9yZGVyIERldGFpbHMnIDogJ1NlZSBNZWFzdXJlbWVudHMnO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgdHlwZT0nc3VibWl0J1xuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICBjbGFzc05hbWU9J3Nob3J0LWJ1dHRvbidcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnNob3dIaWRlRGVhdGlsc09yQ3VzdG9tZXJNZWFzdXJlbWVudHNCdXR0b24oc2hvd01lYXN1cmVtZW50cyl9Lz5cbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDxkaXY+PC9kaXY+XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCl7XG4gICAgY29uc3QgeyBjdXJyZW50U3RvcmUsIGN1cnJlbnRPcmRlcn0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgY3VzdG9tZXIgfSA9IGN1cnJlbnRPcmRlcjtcbiAgICBjb25zdCBvcmRlckVkaXRQYXRoID0gYC9vcmRlcnMvJHtjdXJyZW50T3JkZXIuaWR9L2VkaXRgO1xuICAgIGNvbnN0IGhlYWRlclRleHQ9YE9yZGVycyAvICR7Y3VycmVudFN0b3JlLm5hbWV9IC8gIyR7Y3VycmVudE9yZGVyLmlkfWA7XG5cbiAgICBpZiAoIWlzRW1wdHkoY3VycmVudE9yZGVyKSl7XG4gICAgICBjb25zdCBjdXN0b21lclJvdXRlID0gYC9jdXN0b21lcnMvJHtjdXN0b21lci5pZH0vZWRpdGA7XG4gICAgICBjb25zdCBtYWluQ29udGVudCA9ICF0aGlzLnN0YXRlLnNob3dNZWFzdXJlbWVudHMgPyB0aGlzLnJlbmRlck9yZGVyRGV0YWlscygpIDogPE1lYXN1cmVtZW50cyBjdXN0b21lcj17Y3VzdG9tZXJ9Lz47XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxTZWN0aW9uSGVhZGVyIHRleHQ9e2hlYWRlclRleHR9IGxpbmtUbz17Y3VzdG9tZXJSb3V0ZX0gbGlua1RleHQ9eyBjdXN0b21lci5maXJzdF9uYW1lICsgJyAnICsgY3VzdG9tZXIubGFzdF9uYW1lfSAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdvcmRlci1zaG93Jz5cbiAgICAgICAgICAgeyB0aGlzLnJlbmRlckVkaXRPcmRlcih0aGlzLnByb3BzLmN1cnJlbnRVc2VyLnVzZXIucm9sZXNbMF0ubmFtZSwgb3JkZXJFZGl0UGF0aCkgfVxuICAgICAgICAgICB7IHRoaXMucmVuZGVyRGV0YWlsc09yTWVhc3VyZW1lbnRzYnV0dG9uKHRoaXMucHJvcHMuY3VycmVudFVzZXIudXNlci5yb2xlc1swXS5uYW1lLCB0aGlzLnN0YXRlKSB9XG5cbiAgICAgICAgICAgIHsgbWFpbkNvbnRlbnQgfVxuXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9kZWJ1Z2dlcjtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPFNlY3Rpb25IZWFkZXIgdGV4dD17aGVhZGVyVGV4dH0gLz5cbiAgICAgICAgICA8ZGl2PkxvYWRpbmcuLjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdG9yZSkgPT4ge1xuICByZXR1cm4ge1xuICAgIGN1cnJlbnRVc2VyOiBzdG9yZS5jdXJyZW50VXNlcixcbiAgICBjdXJyZW50U3RvcmU6IHN0b3JlLmN1cnJlbnRTdG9yZSxcbiAgICBvcGVuT3JkZXJzOiBzdG9yZS5zdG9yZU9yZGVycyxcbiAgICBjdXJyZW50T3JkZXI6IHN0b3JlLmN1cnJlbnRPcmRlclxuICB9XG59XG5cbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IChkaXNwYXRjaCkgPT4ge1xuICByZXR1cm4gYmluZEFjdGlvbkNyZWF0b3JzKHtnZXRDdXJyZW50T3JkZXIsIHVwZGF0ZU9yZGVyfSwgZGlzcGF0Y2gpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShPcmRlcnNTaG93KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NsaWVudC9jb21wb25lbnRzL29yZGVycy9zaG93L09yZGVyc1Nob3cuanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ })

})