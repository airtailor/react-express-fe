webpackJsonp([2],{333:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(2),s=n(c),i=(r(11),r(25)),d=r(17),f=r(4),m=n(f),p=r(52),v=n(p),y=r(30),_=r(693),h=n(_),E=r(708),b=n(E),g=r(709),C=n(g),N=r(110),k=function(e){return{currentUser:e.currentUser,userRoles:e.userRoles,currentStore:e.currentStore}},w=function(e){return(0,i.bindActionCreators)({getCurrentStore:y.getCurrentStore},e)},R=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={active_orders_count:0,late_orders_count:0},e}return l(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.currentUser.user.store_id,n=t.getCurrentStore;(0,y.getOrderCount)(r).then(function(t){e.setState(t.data.body)}),n(r).catch(function(e){console.log(e)})}},{key:"retailerHome",value:function(e){var t=this.state,r=t.active_orders_count;t.late_orders_count;return s.default.createElement("div",{className:"store-boxes"},s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:N.ordersImage,alt:"orders"}),count:r,type:"Current",call:"VIEW >",styleClass:"current-orders"}))}},{key:"adminHome",value:function(e){var t=this.state,r=t.active_orders_count,n=t.late_orders_count;return s.default.createElement("div",{className:"store-boxes"},s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:N.exclamationImage,alt:"orders"}),count:n,type:"Late",call:"FULFILL >",styleClass:"late-orders"}),s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:N.ordersImage,alt:"orders"}),count:r,type:"Current",call:"VIEW >",styleClass:"current-orders"}))}},{key:"tailorHome",value:function(e){var t=this.state,r=t.active_orders_count,n=t.late_orders_count;return s.default.createElement("div",{className:"store-boxes"},s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:N.exclamationImage,alt:"orders"}),count:n,type:"Late",call:"FULFILL >",styleClass:"late-orders"}),s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:N.ordersImage,alt:"orders"}),count:r,type:"Current",call:"VIEW >",styleClass:"current-orders"}))}},{key:"renderCards",value:function(e,t){return e.tailor?this.tailorHome(t):e.admin?this.adminHome(t):e.retailer?this.retailerHome(t):void 0}},{key:"renderStore",value:function(){if((0,v.default)(this.props.currentStore))return s.default.createElement("div",null);var e=this.props,t=e.currentStore,r=(e.currentUser,e.userRoles),n=(t.id,t.name),a=r,o=a.retailer?"store":"shop";return s.default.createElement("div",{className:"home"},s.default.createElement("h2",{className:"greeting"},"Greetings, ",n),s.default.createElement("p",{className:"greeting"},"Here's what's happening with your ",o," right now."),this.renderCards(a,t))}},{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(h.default,{text:"Home / "+this.props.currentStore.name,showCart:!this.props.userRoles.tailor,link:"/orders/new",rotate:""}),this.renderStore())}}]),t}(c.Component);R.propTypes={currentUser:m.default.object.isRequired,userRoles:m.default.object.isRequired,currentStore:m.default.object.isRequired,getCurrentStore:m.default.func.isRequired},t.default=(0,d.connect)(k,w)(R)},693:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(17),l=r(25),u=r(11),c=r(30),s=function(e){var t=e.rotate,r=(e.userRoles,e.includeLink,e.link),n=void 0;if(t&&0!==t.length?n=function(){return e.resetCart()}:(r="/orders/new",n=function(){return console.log("")}),e.userRoles.admin||e.userRoles.retailer)return a.default.createElement(u.Link,{className:"cart-ribbon",to:r},a.default.createElement("h1",{className:"cart-ribbon-sign "+t,onClick:n},"+"),a.default.createElement("div",{className:"cart-ribbon-triangle"}))},i=function(e){return a.default.createElement("div",{className:"section-header"},a.default.createElement("h2",null,e.text),s(e))},d=function(e){return{currentUser:e.currentUser,userRoles:e.userRoles}},f=function(e){return(0,l.bindActionCreators)({resetCart:c.resetCart},e)};t.default=(0,o.connect)(d,f)(i)},708:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(11),l=function(e){var t=e.icon,r=e.count,n=e.type,l=e.call,u=e.styleClass,c=u+" order-card",s=void 0,i=void 0;return"current-orders"!==u&&"late-orders"!==u||(s="Orders",i="/orders"),a.default.createElement(o.Link,{to:i},a.default.createElement("div",{className:c},t,a.default.createElement("p",{className:"order-card-text order-card-count"},r),a.default.createElement("p",{className:"order-card-text order-card-type"},n),a.default.createElement("p",{className:"order-card-text"},s),a.default.createElement("p",{className:"order-card-text order-card-call"},l)))};t.default=l},709:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),a=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e){var t=e.url,r=e.alt;return a.default.createElement("img",{className:"order-card-icon",src:t,alt:r})};t.default=o}});