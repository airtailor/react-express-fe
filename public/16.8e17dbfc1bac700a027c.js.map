{"version":3,"sources":["webpack:///./client/components/admin/retailers/index.js","webpack:///./client/components/admin/retailers/ducks/actions.js"],"names":["mapStateToProps","retailerList","store","mapDispatchToProps","setLoader","removeLoader","getRetailerList","dispatch","RetailerIndex","renderRetailerRow","id","retailer","name","active","active_orders_count","truncatedRetailerName","route","editRoute","renderRetailerRows","props","map","tailor","renderRetailerHeaders","then","retailerOrderHeaders","retailerOrderRows","propTypes","array","isRequired","func","require","validateToken","setTokens","url","get","setRetailerList","res","data","body","catch","retailers","type"],"mappings":"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","file":"16.8e17dbfc1bac700a027c.js","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport moment from 'moment';\nimport isEmpty from 'lodash/isEmpty';\nimport { Redirect, Link } from 'react-router-dom';\nimport { getRetailerList, setLoader, removeLoader } from './ducks/actions';\nimport SectionHeader from '../../SectionHeader';\nimport PropTypes from 'prop-types';\n\nconst mapStateToProps = store => {\n  return {\n    retailerList: store.retailerList,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    { setLoader, removeLoader, getRetailerList },\n    dispatch\n  );\n};\n\nclass RetailerIndex extends Component {\n  static propTypes = {\n    retailerList: PropTypes.array.isRequired, // mapStateToProps\n    setLoader: PropTypes.func.isRequired, // mapDispatchToProps\n    removeLoader: PropTypes.func.isRequired, // mapDispatchToProps\n    getRetailerList: PropTypes.func.isRequired, // mapDispatchToProps\n  };\n\n  componentDidMount() {\n    const { setLoader, removeLoader, getRetailerList } = this.props;\n    setLoader();\n    getRetailerList().then(() => removeLoader());\n  }\n\n  truncatedRetailerName(name) {\n    // const length = 14;\n    // return name.length > 20 ? `${name.substring(0, 11)}...` : name;\n    return name;\n  }\n\n  renderRetailerRow = retailer => {\n    const { id, name, active_orders_count: active } = retailer;\n\n    const truncatedRetailerName = this.truncatedRetailerName(name);\n    const route = `/stores/${id}/orders`;\n    const editRoute = `/stores/${id}/edit`;\n\n    return (\n      <div key={id}>\n        <div className=\"tailor-data-row\">\n          <Link to={route} className=\"tailor-link\">\n            <div className=\"tailor-data-cell\">{truncatedRetailerName}</div>\n            <div className=\"tailor-data-cell\">{active}</div>\n            <div className=\"tailor-data-cell\">\n              <Link to={editRoute}>Edit</Link>\n            </div>\n          </Link>\n        </div>\n\n        <hr className=\"tailor-break-row\" />\n      </div>\n    );\n  };\n\n  renderRetailerRows = () => {\n    const { retailerList } = this.props;\n    if (!isEmpty(retailerList)) {\n      return (\n        <div className=\"tailor-container\">\n          {retailerList.map(tailor => this.renderRetailerRow(tailor))}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"table-row\">\n          <div className=\"loading-orders\">Loading Retailers...</div>\n        </div>\n      );\n    }\n  };\n\n  renderRetailerHeaders = () => {\n    return (\n      <div>\n        <div className=\"tailor-headers-container\">\n          <div className=\"tailor-headers-row\">\n            <h3 className=\"tailor-header-cell\">Retailer</h3>\n            <h3 className=\"tailor-header-cell\">Assigned Orders</h3>\n            <h3 className=\"tailor-header-cell\">Edit</h3>\n          </div>\n          <hr className=\"tailor-header-break-row\" />\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const retailerOrderHeaders = this.renderRetailerHeaders;\n    const retailerOrderRows = this.renderRetailerRows;\n    return (\n      <div>\n        <SectionHeader text={'Manage Retailers'} />\n        <div className=\"tailors\">\n          {retailerOrderHeaders()}\n          {retailerOrderRows()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RetailerIndex);\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/admin/retailers/index.js","import Axios from 'axios';\nimport { SET_RETAILER_LIST, expressApi } from './constants';\n\nexport const {\n  setLoader,\n  removeLoader,\n  validateToken,\n  setTokens,\n} = require('../../../../actions');\n\nexport function getRetailerList() {\n  const url = `${expressApi}/stores/retailers`;\n  return dispatch => {\n    return validateToken(dispatch)\n      .then(setTokens)\n      .then(() => {\n        return Axios.get(url)\n          .then(res => {\n            dispatch(setRetailerList(res.data.body));\n          })\n          .catch(err => {\n            debugger;\n          });\n      });\n  };\n}\n\nfunction setRetailerList(retailers) {\n  return {\n    type: SET_RETAILER_LIST,\n    retailers,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/admin/retailers/ducks/actions.js"],"sourceRoot":""}