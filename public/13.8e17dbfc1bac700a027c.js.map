{"version":3,"sources":["webpack:///./client/components/users/list/index.js","webpack:///./client/components/users/list/ducks/actions.js"],"names":["mapStateToProps","users","store","usersList","mapDispatchToProps","setLoader","removeLoader","getUsersList","dispatch","UsersList","renderUserRow","id","user","email","roles","valid_roles","roleString","extractRoles","storeName","name","route","renderUserRows","props","userRowSet","map","renderUserHeaders","then","initVal","Object","keys","reduce","acc","key","i","userHeaders","userRows","propTypes","array","isRequired","func","require","validateToken","setTokens","url","get","setUsersList","res","data","body","catch","type"],"mappings":"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","file":"13.8e17dbfc1bac700a027c.js","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { setLoader, removeLoader, getUsersList } from './ducks/actions';\nimport SectionHeader from '../../SectionHeader';\nimport { isEmpty, startCase } from 'lodash';\nimport PropTypes from 'prop-types';\n\nconst mapStateToProps = store => {\n  return { users: store.usersList };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    { setLoader, removeLoader, getUsersList },\n    dispatch\n  );\n};\n\nclass UsersList extends Component {\n  static propTypes = {\n    users: PropTypes.array.isRequired, // mapStateToProps\n    setLoader: PropTypes.func.isRequired, // mapDispatchToProps\n    removeLoader: PropTypes.func.isRequired, // mapDispatchToProps\n    getUsersList: PropTypes.func.isRequired, // mapDispatchToProps\n  };\n  componentDidMount() {\n    const { users } = this.props;\n    if (isEmpty(users)) {\n      const { setLoader, removeLoader, getUsersList } = this.props;\n      setLoader();\n      getUsersList().then(res => removeLoader());\n    }\n  }\n\n  extractRoles(roles, initVal = '') {\n    return Object.keys(roles).reduce(\n      (acc, key, i) =>\n        roles[key] ? startCase(key) + (i == 0 ? '' : ', ') + acc : '',\n      initVal\n    );\n  }\n\n  renderUserRow = user => {\n    const { id, email, store } = user;\n    const { valid_roles: roles } = user;\n    const roleString = isEmpty(roles) ? 'N/A' : this.extractRoles(roles);\n    const storeName = store ? store.name : 'N/A';\n    const route = `/users/${id}/edit`;\n\n    return (\n      <div key={id}>\n        <div className=\"user-data-row\">\n          <Link to={route} className=\"user-link\">\n            <div className=\"user-data-cell\">{id}</div>\n            <div className=\"user-data-cell\">{email}</div>\n            <div className=\"user-data-cell\">{storeName}</div>\n            <div className=\"user-data-cell\">{roleString}</div>\n          </Link>\n        </div>\n      </div>\n    );\n  };\n\n  renderUserRows = () => {\n    const { users } = this.props;\n    if (!isEmpty(users)) {\n      const userRowSet = users.map(user => this.renderUserRow(user));\n      return <div className=\"user-container\">{userRowSet}</div>;\n    } else {\n      return (\n        <div className=\"table-row\">\n          <div className=\"loading-orders\">Loading Users...</div>\n        </div>\n      );\n    }\n  };\n\n  renderUserHeaders = () => {\n    return (\n      <div>\n        <div className=\"user-headers-container\">\n          <div className=\"user-headers-row\">\n            <h3 className=\"user-header-cell\">Id</h3>\n            <h3 className=\"user-header-cell\">Email</h3>\n            <h3 className=\"user-header-cell\">Store Name</h3>\n            <h3 className=\"user-header-cell\">Role</h3>\n          </div>\n          <hr className=\"user-header-break-row\" />\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const userHeaders = this.renderUserHeaders;\n    const userRows = this.renderUserRows;\n    return (\n      <div>\n        <SectionHeader text={'Manage Users'} link={'/users/new'} />\n        <div className=\"users\">\n          {userHeaders()}\n          {userRows()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersList);\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/users/list/index.js","import Axios from 'axios';\nimport { SET_USERS_LIST, expressApi } from './constants';\n\nexport const {\n  setLoader,\n  removeLoader,\n  validateToken,\n  setTokens,\n} = require('../../../../actions');\n\nexport const getUsersList = id => {\n  const url = `${expressApi}/users/list`;\n  return dispatch => {\n    return validateToken()\n      .then(setTokens)\n      .then(() => {\n        return Axios.get(url)\n          .then(res => {\n            dispatch(setUsersList(res.data.body));\n            return res;\n          })\n          .catch(err => {\n            debugger;\n          });\n      });\n  };\n};\n\nconst setUsersList = users => {\n  return {\n    type: SET_USERS_LIST,\n    users,\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/users/list/ducks/actions.js"],"sourceRoot":""}