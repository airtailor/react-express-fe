webpackJsonp([1],{331:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=n(u),d=r(16),f=r(24),p=r(11),h=r(4),m=n(h),y=r(51),b=n(y),v=r(28),O=r(323),_=r(716),g=n(_),w=r(721),S=n(w),E=function(e){return{currentUser:e.currentUser,currentStore:e.currentStore,openOrders:e.storeOrders,userRoles:e.userRoles}},j=function(e){return(0,f.bindActionCreators)({getStoreOrders:v.getStoreOrders,setLoader:v.setLoader,removeLoader:v.removeLoader,setGrowler:v.setGrowler},e)},k=function(e){function t(e){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.timer=function(){(0,O.waitingForPostmatesUpdate)(r.props.openOrders)&&r.refreshStoreOrders()},r.refreshStoreOrders=function(){r.props.setLoader();var e=r.props,t=e.getStoreOrders,n=e.match.params.store_id,o=e.currentUser.user.id,a=e.userRoles.admin,s=n&&a?n:o;r.setState({loadingOrders:!0}),t(s).then(function(e){r.setState({loadingOrders:!1}),r.props.removeLoader()}).catch(function(e){return console.log(e)})},r.handleBulkMailRes=function(e){var t=e.data.body.errors;(0,b.default)(t)?r.setState({selectedOrderShipments:e.data.body},function(){var e=r.state.selectedOrderShipments[0].shipping_label,t=function(){window.print(),setTimeout(function(){r.setState({selectedOrders:new Set,selectedOrderShipments:[]})},1e3)};(0,O.imageLoader)(e,t)}):Object.keys(t).map(function(e){r.props.setGrowler({kind:"warning",message:t[e][0].message})})},r.handleMessengerRes=function(e){r.props.setGrowler({kind:"success",message:"Messenger has been requested!"}),r.setState({selectedOrders:new Set})},r.alertCustomers=function(){var e=r.props,t=(e.userRoles,e.currentStore.id),n=r.state.selectedOrders;r.props.setLoader(),(0,v.alertCustomersPickup)(n,t).then(function(e){if(200===e.body.status){r.props.setGrowler({kind:"success",message:"Your customers have been notified to pick up their orders."}),r.props.removeLoader(),r.refreshStoreOrders(),r.setState({selectedOrders:new Set})}})},r.toggleOrderSelect=function(e){if(r.state.selectedOrders.has(e)){var t=r.state.selectedOrders;t.delete(e),r.setState({selectedOrders:t})}else{var n=r.state.selectedOrders;n.add(e),r.setState({selectedOrders:n})}},r.setOrderTabState=function(e){r.setState({showOrderState:e,selectedOrders:new Set})},r.markCustomerReceived=function(){var e=r.state.selectedOrders,t=r.props,n=t.currentStore.id,a=t.setLoader,s=t.removeLoader,l=t.setGrowler,i=[].concat(o(e)).map(function(e){return e.id});a(),(0,v.customerReceived)(i,n).then(function(e){s();l({kind:"success",message:"Order has been marked as Completed! You can now view it in the Archive."}),r.refreshStoreOrders(),r.setState({selectedOrders:new Set})}).catch(function(e){return console.log("err")})},r.sortOrdersByStatus=function(e){var t=r.props,n=t.openOrders,o=t.userRoles;switch(e){case"new_orders":return o.tailor?n.filter(function(e){return!(0,b.default)(e.shipments)&&e.tailor}):n.filter(function(e){var t=e.shipments,r=(0,b.default)(t),n=t[t.length-1],o=!e.fulfilled,a=t.length>0&&"messenger_shipment"===n.delivery_type&&"delivered"!=n.status;return o&&(r||a)});case"in_progress_orders":return o.tailor?n.filter(function(e){return e.arrived&&!e.fulfilled}):n.filter(function(e){if((0,b.default)(e.shipments))return!1;var t=e.tailor,r=e.fulfilled,n=e.shipments,o=n[n.length-1],a=o.status,s=o.delivery_type,l="mail_shipment"===s,i="delivered"===a;return(l||i)&&t&&!r});case"ready_orders":return n.filter(function(e){return e.fulfilled});default:return n}},r.state={showOrderState:"new_orders",selectedOrders:new Set,selectedOrderShipments:[],loadingOrders:!0},r}return l(t,e),i(t,[{key:"componentDidMount",value:function(){this.refreshStoreOrders(),(this.props.userRoles.retailer||this.props.userRoles.admin)&&(this.newInterval=setInterval(this.timer,1e4))}},{key:"componentWillUnmount",value:function(){clearInterval(this.newInterval)}},{key:"render",value:function(){if(!this.props.currentStore)return c.default.createElement(p.Redirect,{to:"/"});var e=this.props,t=e.userRoles,r=t.tailor,n=t.retailer,o=t.admin,a=e.userRoles,s=e.openOrders,l=this.state,i=l.loadingOrders,u=l.selectedOrders,d=l.selectedOrderShipments,f=l.showOrderState,h="Orders / "+this.props.currentStore.name;return n||o?c.default.createElement(g.default,{showOrderState:f,loadingOrders:i,headerText:h,openOrders:s,userRoles:a,selectedOrders:u,selectedOrderShipments:d,handleBulkMailRes:this.handleBulkMailRes,handleMessengerRes:this.handleMessengerRes,refreshStoreOrders:this.refreshStoreOrders,setOrderTabState:this.setOrderTabState,markCustomerReceived:this.markCustomerReceived,alertCustomers:this.alertCustomers,toggleOrderSelect:this.toggleOrderSelect,sortOrdersByStatus:this.sortOrdersByStatus}):r?c.default.createElement(S.default,{headerText:h,openOrders:s,loadingOrders:i,userRoles:a,sortOrdersByStatus:this.sortOrdersByStatus}):void 0}}]),t}(u.Component);k.propTypes={currentUser:m.default.object.isRequired,currentStore:m.default.object.isRequired,userRoles:m.default.object.isRequired,openOrders:m.default.array.isRequired,getStoreOrders:m.default.func.isRequired,setLoader:m.default.func.isRequired,removeLoader:m.default.func.isRequired,setGrowler:m.default.func.isRequired},t.default=(0,d.connect)(E,j)(k)},678:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=r(16),s=r(24),l=r(11),i=r(28),u=function(e){var t=e.rotate,r=(e.userRoles,e.includeLink,e.link),n=void 0;if(t&&0!==t.length?n=function(){return e.resetCart()}:(r="/orders/new",n=function(){return console.log("")}),e.userRoles.admin||e.userRoles.retailer)return o.default.createElement(l.Link,{className:"cart-ribbon",to:r},o.default.createElement("h1",{className:"cart-ribbon-sign "+t,onClick:n},"+"),o.default.createElement("div",{className:"cart-ribbon-triangle"}))},c=function(e){return o.default.createElement("div",{className:"section-header"},o.default.createElement("h2",null,e.text),u(e))},d=function(e){return{currentUser:e.currentUser,userRoles:e.userRoles}},f=function(e){return(0,s.bindActionCreators)({resetCart:i.resetCart},e)};t.default=(0,a.connect)(d,f)(c)},683:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){var t=e.onChange,r=e.checked,n=e.fieldName,a=e.text,s=e.name,l=e.labelClass;return n?o.default.createElement("div",{style:{display:"inline"}},o.default.createElement("input",{type:"checkbox",id:s+"-check",name:s,checked:r,onChange:function(){return t(n,!r)}}),o.default.createElement("label",{htmlFor:s+"-check",className:"checkbox-label"},o.default.createElement("span",null),a)):o.default.createElement("div",{style:{display:"inline"}},o.default.createElement("input",{type:"checkbox",id:s+"-check",name:s,checked:r,onChange:t}),o.default.createElement("label",{htmlFor:s+"-check",className:"checkbox-label "+l},o.default.createElement("span",null),a))};t.default=a},685:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){var t=e.className,r=e.clickArgs,n=void 0===r?void 0:r,a=e.onClick,s=void 0===a?function(){return console.log("")}:a,l=e.disabled,i=e.text;return o.default.createElement("input",{type:"submit",onClick:function(){return s(n)},disabled:l,className:t,value:i})};t.default=a},712:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(l),u=function(e){function t(){var e,r,a,s;n(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return r=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.orderHeader=function(e,t,r){return r?i.default.createElement("h3",{className:"order-select-header-cell"},e):t?i.default.createElement("h3",{className:"order-data-header-cell"},e):i.default.createElement("h3",{className:"order-header-cell-no-select"},e)},s=r,o(a,s)}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.showOrderState,t=void 0;return"new_orders"===e?t="Created":"in_progress_orders"===e?t="Checked In":"ready_orders"===e&&(t="Fulfilled"),i.default.createElement("div",{className:"order-headers-container"},i.default.createElement("div",{className:"order-headers-row"},this.orderHeader("Select:",!1,!0),i.default.createElement("div",{className:"order-data-headers-container"},this.orderHeader("Order",!0,!1),this.orderHeader(t,!0,!1),this.orderHeader("Customer",!0,!1),this.orderHeader("Status",!0,!1))))}}]),t}(l.Component);t.default=u},713:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),u=n(i),c=r(0),d=n(c),f=r(51),p=n(f),h=r(11),m=r(683),y=n(m),b=r(717),v=n(b),O=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"formatStatusString",value:function(e,t){var r=(0,d.default)(new Date),n=(0,d.default)(e);return(Math.abs(n.diff(r,"days"))+(t?" days late":" days to go")).toUpperCase()}},{key:"getOrderStatus",value:function(e){var t=(e.shipments,e.arrived,e.late,e.due_date,e.fulfilled,e.customer_alerted,e.ship_to_store,this.props.userRoles),r=t.retailer,n=t.admin,o=t.tailor,a=void 0,s=void 0;if((0,p.default)(e.shipments))a="Needs Transit",s="red";else if((0,p.default)(e.shipments)||e.arrived){if(e.late&&!e.fulfilled){if(n||o){var l=this.formatStatusString(e.due_date,!0);a=l}else r&&(a="Delayed");s="red"}else if(e.fulfilled&&!e.customer_alerted&&e.ship_to_store)a="In Transit",s="gold";else if(e.fulfilled&&e.customer_alerted&&e.ship_to_store)a="Notified",s="red";else if(e.arrived&&!e.fulfilled){a=this.formatStatusString(e.due_date,!1);var i=a.split("")[0];i>3?s="green":i>0?s="gold":i<1&&(s="red")}}else{var u=e.shipments[e.shipments.length-1],c=u.delivery_type;if("mail_shipment"===c)a="In Transit",s="gold";else if("messenger_shipment"===c){var d=u.status;"pending"===d?(a="Contacting",s="red"):"pickup"===d?(a="Picking Up",s="goldenrod"):"pickup_complete"===d||"dropoff"===d?(a="Dropping Off",s="gold"):"delivered"===d&&(a="Delivered",s="green")}}return{status:a,color:s}}},{key:"render",value:function(){var e=this.props,t=(e.userRoles,e.order),r=e.showOrderState,n=e.selectedOrders,o=e.toggleOrderSelect,a=t.id,s=t.customer,l=(t.alterations_count,t.created_at),i=t.arrival_date,c=t.fulfilled_date,f=s.first_name,p=s.last_name,m=this.getOrderStatus(t),b=m.color,O=m.status,_="/orders/"+a,g=n.has(t),w=function(){return o(t)},S=void 0;"new_orders"===r?S=l:"in_progress_orders"===r?S=i:"ready_orders"===r&&(S=c);var E=(0,d.default)(S),j=E.isSame(new Date,"day"),k=(0,d.default)(new Date).add(-1,"days"),C=E.isSame(k,"day"),N=j?"[Today,] h:mma":C?"[Yesterday,] h:mma":"MMM Do, h:mma",P=E.format(N);"Invalid date"!==P||i||(P="Pending");var R=u.default.createElement(y.default,{checked:g,type:"checkbox",name:a,onChange:w});return u.default.createElement("div",{className:"order-row",key:a},u.default.createElement("div",{className:"order-select-cell"},R),u.default.createElement(h.Link,{to:_,className:"order-row-link"},u.default.createElement("div",{className:"order-data-cell"},"#",a),u.default.createElement("div",{className:"order-data-cell"},P),u.default.createElement("div",{className:"order-data-cell"},f," ",p),u.default.createElement(v.default,{color:b,text:O})),u.default.createElement("div",{className:"order-data-break-row"}))}}]),t}(i.Component);t.default=O},714:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),u=n(i),c=r(51),d=n(c),f=r(713),p=n(f),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.openOrders,r=e.showOrderState,n=e.userRoles,o=e.loadingOrders,a=e.selectedOrders,s=e.toggleOrderSelect,l=e.sortOrdersByStatus;if(!(0,d.default)(t)){var i=l(r);return(0,d.default)(i)?u.default.createElement("div",{className:"table-row"},u.default.createElement("div",{className:"no-orders"},"No orders found!")):u.default.createElement("div",{className:"order-data-container"},i.map(function(e){return u.default.createElement(p.default,{key:e.id,order:e,userRoles:n,selectedOrders:a,toggleOrderSelect:s,showOrderState:r})}))}return o?u.default.createElement("div",{className:"table-row"},u.default.createElement("div",{className:"loading-orders"},"Loading Orders...")):u.default.createElement("div",null)}}]),t}(i.Component);t.default=h},715:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),u=n(i),c=r(51),d=n(c),f=function(e){function t(){var e,r,n,s;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.countOrdersByStatus=function(e){return n.sortOrdersByStatus(e).length},n.sortOrdersByStatus=function(e){var t=n.props,r=t.openOrders,o=t.userRoles;switch(e){case"new_orders":return o.tailor?r.filter(function(e){return!(0,d.default)(e.shipments)&&e.tailor}):r.filter(function(e){var t=e.shipments,r=(0,d.default)(t),n=t[t.length-1],o=!e.fulfilled,a=t.length>0&&"messenger_shipment"===n.delivery_type&&"delivered"!=n.status;return o&&(r||a)});case"in_progress_orders":return o.tailor?r.filter(function(e){return e.arrived&&!e.fulfilled}):r.filter(function(e){if((0,d.default)(e.shipments))return!1;var t=e.tailor,r=e.fulfilled,n=e.shipments,o=n[n.length-1],a=o.status,s=o.delivery_type,l="mail_shipment"===s,i="delivered"===a;return(l||i)&&t&&!r});case"ready_orders":return r.filter(function(e){return e.fulfilled});default:return r}},s=r,a(n,s)}return s(t,e),l(t,[{key:"render",value:function(){var e=this,t=[{className:"order-state-tab",status:"new_orders",text:"New Orders"},{className:"order-state-tab",status:"in_progress_orders",text:"In Process"},{className:"order-state-tab",status:"ready_orders",text:"In-Store Pickup"}],r=t.map(function(t,r){return t.status===e.props.showOrderState&&(t.className=t.className.concat(" selected")),u.default.createElement("div",{key:r,className:t.className,onClick:function(){return e.props.setOrderTabState(t.status)}},u.default.createElement("h3",null,t.text," (",e.countOrdersByStatus(t.status),")"))});return u.default.createElement("div",{className:"order-state-row"},r)}}]),t}(i.Component);t.default=f},716:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=n(u),d=r(678),f=n(d),p=r(715),h=n(p),m=r(712),y=n(m),b=r(714),v=n(b),O=r(723),_=n(O),g=r(722),w=n(g),S=function(e){function t(){var e,r,n,l;a(this,t);for(var i=arguments.length,u=Array(i),d=0;d<i;d++)u[d]=arguments[d];return r=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.mgmtControls=function(){var e=n.props,t=e.showOrderState,r=e.selectedOrders,a=e.selectedOrderShipments,s=e.handleBulkMailRes,l=e.handleMessengerRes,i=e.refreshStoreOrders,u=e.markCustomerReceived,d=e.alertCustomers;return"new_orders"===t?c.default.createElement(_.default,{selectedOrders:[].concat(o(r)),selectedOrderShipments:[].concat(o(a)),handleBulkMailRes:s,handleMessengerRes:l,refreshStoreOrders:i}):"ready_orders"===t?c.default.createElement(w.default,{selectedOrders:[].concat(o(r)),alertCustomers:d,markCustomerReceived:u}):void 0},l=r,s(n,l)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.headerText,r=e.showOrderState,n=e.openOrders,o=e.userRoles,a=e.loadingOrders,s=e.selectedOrders,l=e.setOrderTabState,i=e.toggleOrderSelect,u=e.sortOrdersByStatus;return c.default.createElement("div",null,c.default.createElement(f.default,{text:t}),c.default.createElement("div",{className:"orders"},c.default.createElement("div",{className:"order-state-container"},c.default.createElement(h.default,{userRoles:o,openOrders:n,showOrderState:r,setOrderTabState:l})),c.default.createElement("div",null,c.default.createElement(y.default,{showOrderState:r})),c.default.createElement("div",{className:"order-header-break-row"}),c.default.createElement("div",null,c.default.createElement(v.default,{showOrderState:r,openOrders:n,userRoles:o,loadingOrders:a,selectedOrders:s,toggleOrderSelect:i,sortOrdersByStatus:u})),c.default.createElement("div",null,this.mgmtControls())))}}]),t}(u.Component);t.default=S},717:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),u=n(i),c=r(4),d=n(c),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.color,r=e.text;return u.default.createElement("div",{className:t+" status-card order-data-cell"},r)}}]),t}(i.Component);f.propTypes={color:d.default.string.isRequired,text:d.default.string.isRequired},t.default=f},718:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(l),u=function(e){function t(){var e,r,a,s;n(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return r=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.renderHeaderCell=function(e,t,r){return r?i.default.createElement("h3",{className:"order-select-header-cell"},e):t?i.default.createElement("h3",{className:"order-data-header-cell"},e):i.default.createElement("h3",{className:"order-header-cell-no-select"},e)},s=r,o(a,s)}return a(t,e),s(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"order-headers-container"},i.default.createElement("div",{className:"order-headers-row-no-select"},i.default.createElement("div",{className:"order-headers-container-no-select"},this.renderHeaderCell("Id",!1),this.renderHeaderCell("Status",!1),this.renderHeaderCell("Customer",!1),this.renderHeaderCell("Quantity",!1))))}}]),t}(l.Component);t.default=u},719:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),u=n(i),c=r(51),d=n(c),f=r(11),p=r(0),h=n(p),m=function(e){function t(){var e,r,n,s;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.formatStatusString=function(e,t){var r=(0,h.default)(new Date),n=(0,h.default)(e);return(Math.abs(n.diff(r,"days"))+(t?" days late":" days to go")).toUpperCase()},n.getOrderStatus=function(e){var t=(e.shipments,e.arrived,e.late,e.due_date,e.fulfilled,e.customer_alerted,e.ship_to_store,n.props.userRoles),r=t.retailer,o=t.admin,a=t.tailor,s=void 0,l=void 0;if((0,d.default)(e.shipments))s="Needs Transit",l="red";else if((0,d.default)(e.shipments)||e.arrived){if(e.late&&!e.fulfilled){if(o||a){var i=n.formatStatusString(e.due_date,!0);s=i}else r&&(s="Delayed");l="red"}else if(e.fulfilled&&!e.customer_alerted&&e.ship_to_store)s="In Transit",l="gold";else if(e.fulfilled&&e.customer_alerted&&e.ship_to_store)s="Notified",l="red";else if(e.arrived&&!e.fulfilled){s=n.formatStatusString(e.due_date,!1);var u=s.split("")[0];u>3?l="green":u>0?l="gold":u<1&&(l="red")}}else{var c=e.shipments[e.shipments.length-1],f=c.delivery_type;if("mail_shipment"===f)s="In Transit",l="gold";else if("messenger_shipment"===f){var p=c.status;"pending"===p?(s="Contacting",l="red"):"pickup"===p?(s="Picking Up",l="goldenrod"):"pickup_complete"===p||"dropoff"===p?(s="Dropping Off",l="gold"):"delivered"===p&&(s="Delivered",l="green")}}return{status:s,color:l}},s=r,a(n,s)}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.order,r=e.order,n=r.id,o=r.alterations_count,a=r.customer,s=a.first_name,l=a.last_name,i=this.getOrderStatus(t),c=i.color,d=i.status,p="/orders/"+n;return u.default.createElement("div",{className:"order-row",key:n},u.default.createElement(f.Link,{to:p,className:"order-row-link-no-select"},u.default.createElement("div",{className:"order-cell-no-select"},"#",n),u.default.createElement("div",{style:{color:c},className:"order-cell-no-select"},d),u.default.createElement("div",{className:"order-cell-no-select"},s," ",l),u.default.createElement("div",{className:"order-cell-no-select"},o)),u.default.createElement("div",{className:"order-data-break-row"}))}}]),t}(i.Component);t.default=m},720:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),u=n(i),c=r(51),d=n(c),f=r(719),p=n(f),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.openOrders,r=e.sortOrdersByStatus,n=e.loadingOrders,o=e.userRoles;if((0,d.default)(t))return n?u.default.createElement("div",{className:"table-row"},u.default.createElement("div",{className:"loading-orders"},"Loading Orders...")):u.default.createElement("div",{className:"table-row"});var a=r("new_orders");return(0,d.default)(a)?u.default.createElement("div",{className:"table-row"},u.default.createElement("div",{className:"no-orders"},"No orders found!")):u.default.createElement("div",{className:"order-data-container"},a.map(function(e,t){return u.default.createElement(p.default,{order:e,userRoles:o,key:t})}))}}]),t}(i.Component);t.default=h},721:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),u=n(i),c=r(678),d=n(c),f=r(718),p=n(f),h=r(720),m=n(h),y=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.headerText,r=e.openOrders,n=e.loadingOrders,o=e.sortOrdersByStatus,a=e.userRoles;return u.default.createElement("div",null,u.default.createElement(d.default,{text:t}),u.default.createElement("div",{className:"orders"},u.default.createElement("div",null,u.default.createElement(p.default,null)),u.default.createElement("div",{className:"order-header-break-row"}),u.default.createElement("div",null,u.default.createElement(m.default,{openOrders:r,loadingOrders:n,sortOrdersByStatus:o,userRoles:a}))))}}]),t}(i.Component);t.default=y},722:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),u=n(i),c=r(685),d=n(c),f=function(e){function t(){var e,r,n,s;o(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.customerNotifiedSet=function(){var e=n.props.selectedOrders;return new Set(e.map(function(e){return e.customer_alerted}))},n.customerNotifiedDisabled=function(){var e=n.customerNotifiedSet();return e.size<1||e.has(!0)},n.customerPickupDisabled=function(){var e=n.customerNotifiedSet();return e.size<1||e.has(!1)},s=r,a(n,s)}return s(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"flex-container",style:{justifyContent:"space-around"}},u.default.createElement(d.default,{className:"send-order-button",onClick:this.props.alertCustomers,disabled:this.customerNotifiedDisabled(),text:"NOTIFY CUSTOMER"}),u.default.createElement(d.default,{className:"send-order-button",onClick:this.props.markCustomerReceived,disabled:this.customerPickupDisabled(),text:"CUSTOMER RECEIVED"}))}}]),t}(i.Component);t.default=f},723:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=n(u),d=r(16),f=r(24),p=r(685),h=n(p),m=r(724),y=n(m),b=r(325),v=n(b),O=r(323),_=r(28),g=function(e){return{userRoles:e.userRoles}},w=function(e){return(0,f.bindActionCreators)({setLoader:_.setLoader,removeLoader:_.removeLoader},e)},S=function(e){function t(e){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.hideShow=function(){var e=!r.state.showOptions;r.setState({showOptions:e})},r.handleSubmit=function(e){var t=r.props.selectedOrders,n=r.props,a=n.setLoader,s=n.removeLoader,l=n.userRoles,i=[].concat(o(t)).map(function(e){return e.id});a();var u=(0,O.shipmentActions)([].concat(o(t))[0],l);(0,_.createShipment)({shipment:{delivery_type:e,order_ids:i,shipment_action:u}}).then(function(t){s(),"mail_shipment"===e?r.props.handleBulkMailRes(t):r.props.handleMessengerRes(t)})},r.noSelectedOrders=function(e){return 0===e.length},r.state={showOptions:!1},r}return l(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.noSelectedOrders(e.selectedOrders),r=this.state.showOptions;t&&r&&(this.hideShow(),this.props.refreshStoreOrders())}},{key:"render",value:function(){var e=this.state.showOptions,t=this.props,r=t.selectedOrders,n=t.selectedOrderShipments,o=this.noSelectedOrders(r);return e?c.default.createElement("div",{className:"shipping-option-container"},c.default.createElement(y.default,{handleSubmit:this.handleSubmit,hideShow:this.hideShow}),c.default.createElement(v.default,{shipmentSet:n})):c.default.createElement("div",{className:"shipping-option-container"},c.default.createElement(h.default,{className:"send-order-button",onClick:this.hideShow,disabled:o,text:"SEND ORDER"}))}}]),t}(u.Component);t.default=(0,d.connect)(g,w)(S)},724:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),u=n(i),c=r(0),d=n(c),f=r(683),p=n(f),h=r(685),m=n(h),y=r(323),b=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.renderMessengerOption=function(){var t=(0,d.default)();if((0,y.messengerAvailable)(t))return u.default.createElement("div",{className:"shipping-option"},u.default.createElement("hr",{style:{float:"right",width:"85%",marginTop:"20px"}}),u.default.createElement(p.default,{name:"messenger_shipment",checked:"messenger_shipment"===e.state.selected,onChange:function(t){return e.updateSelected(t.target.name)},text:"Call Postmates Messenger (est. $13)",labelClass:"shipping-option-label"}))},e.state={selected:null},e}return s(t,e),l(t,[{key:"updateSelected",value:function(e){var t=this.state.selected,r=e===t?null:e;this.setState({selected:r})}},{key:"clearSelection",value:function(){this.setState({selected:null}),this.props.hideShow()}},{key:"render",value:function(){var e=this,t=this.state.selected,r=!t;return u.default.createElement("div",{style:{width:"380px",border:"3px solid #000033",borderRadius:"8px",padding:"30px",marginTop:"50px"}},u.default.createElement("div",{className:"shipping-option"},u.default.createElement(p.default,{name:"mail_shipment",checked:"mail_shipment"===t,onChange:function(t){return e.updateSelected(t.target.name)},text:"Print USPS Shipping Label (est. $6)",labelClass:"shipping-option-label"})),this.renderMessengerOption(),u.default.createElement("br",null),u.default.createElement("div",{className:"flex-container",style:{justifyContent:"space-between"}},u.default.createElement(m.default,{className:"send-order-button",onClick:this.props.hideShow,disabled:!1,text:"CANCEL"}),u.default.createElement(m.default,{className:"send-order-button",onClick:function(){return e.props.handleSubmit(t)},disabled:r,text:"SELECT"})))}}]),t}(i.Component);t.default=b}});