webpackJsonp([2],{336:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),c=r(1),s=a(c),d=(r(8),r(19)),i=r(15),f=r(4),m=a(f),p=r(38),y=a(p),v=r(25),_=r(326),h=a(_),E=r(712),b=a(E),g=r(713),C=a(g),w=r(108),S=function(e){return{currentUser:e.currentUser,userRoles:e.userRoles,currentStore:e.currentStore}},O=function(e){return(0,d.bindActionCreators)({getCurrentStore:v.getCurrentStore},e)},j=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={active_orders_count:0,late_orders_count:0},e}return l(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.currentUser.user.store_id,a=t.getCurrentStore;(0,v.getOrderCount)(r).then(function(t){e.setState(t.data.body)}),a(r).catch(function(e){console.log(e)})}},{key:"retailerHome",value:function(e){var t=this.state,r=t.active_orders_count;t.late_orders_count;return s.default.createElement("div",{className:"store-boxes"},s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:w.ordersImage,alt:"orders"}),count:r,type:"Current",call:"VIEW >",styleClass:"current-orders"}))}},{key:"adminHome",value:function(e){var t=this.state,r=t.active_orders_count,a=t.late_orders_count;return s.default.createElement("div",{className:"store-boxes"},s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:w.exclamationImage,alt:"orders"}),count:a,type:"Late",call:"FULFILL >",styleClass:"late-orders"}),s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:w.ordersImage,alt:"orders"}),count:r,type:"Current",call:"VIEW >",styleClass:"current-orders"}))}},{key:"tailorHome",value:function(e){var t=this.state,r=t.active_orders_count,a=t.late_orders_count;return s.default.createElement("div",{className:"store-boxes"},s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:w.exclamationImage,alt:"orders"}),count:a,type:"Late",call:"FULFILL >",styleClass:"late-orders"}),s.default.createElement(b.default,{icon:s.default.createElement(C.default,{url:w.ordersImage,alt:"orders"}),count:r,type:"Current",call:"VIEW >",styleClass:"current-orders"}))}},{key:"renderCards",value:function(e,t){return e.tailor?this.tailorHome(t):e.admin?this.adminHome(t):e.retailer?this.retailerHome(t):void 0}},{key:"renderStore",value:function(){if((0,y.default)(this.props.currentStore))return s.default.createElement("div",null);var e=this.props,t=e.currentStore,r=(e.currentUser,e.userRoles),a=(t.id,t.name),n=r,o=n.retailer?"store":"shop";return s.default.createElement("div",{className:"home"},s.default.createElement("h2",{className:"greeting"},"Greetings, ",a),s.default.createElement("p",{className:"greeting"},"Here's what's happening with your ",o," right now."),this.renderCards(n,t))}},{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(h.default,{text:"Home / "+this.props.currentStore.name,showCart:!this.props.userRoles.tailor,link:"/orders/new",rotate:""}),this.renderStore())}}]),t}(c.Component);j.propTypes={currentUser:m.default.object.isRequired,userRoles:m.default.object.isRequired,currentStore:m.default.object.isRequired,getCurrentStore:m.default.func.isRequired},t.default=(0,i.connect)(S,O)(j)},712:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=function(e){return e&&e.__esModule?e:{default:e}}(a),o=r(8),l=function(e){var t=e.icon,r=e.count,a=e.type,l=e.call,u=e.styleClass,c=u+" order-card",s=void 0,d=void 0;return"current-orders"!==u&&"late-orders"!==u||(s="Orders",d="/orders"),n.default.createElement(o.Link,{to:d},n.default.createElement("div",{className:c},t,n.default.createElement("p",{className:"order-card-text order-card-count"},r),n.default.createElement("p",{className:"order-card-text order-card-type"},a),n.default.createElement("p",{className:"order-card-text"},s),n.default.createElement("p",{className:"order-card-text order-card-call"},l)))};t.default=l},713:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=function(e){return e&&e.__esModule?e:{default:e}}(a),o=function(e){var t=e.url,r=e.alt;return n.default.createElement("img",{className:"order-card-icon",src:t,alt:r})};t.default=o}});