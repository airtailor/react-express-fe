webpackHotUpdate(0,{

/***/ 354:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(5);\n\nvar _redux = __webpack_require__(7);\n\nvar _actions = __webpack_require__(8);\n\nvar _SelectGarment = __webpack_require__(355);\n\nvar _SelectGarment2 = _interopRequireDefault(_SelectGarment);\n\nvar _SectionHeader = __webpack_require__(19);\n\nvar _SectionHeader2 = _interopRequireDefault(_SectionHeader);\n\nvar _SelectAlterations = __webpack_require__(112);\n\nvar _SelectAlterations2 = _interopRequireDefault(_SelectAlterations);\n\nvar _Cart = __webpack_require__(350);\n\nvar _Cart2 = _interopRequireDefault(_Cart);\n\nvar _OrderDetails = __webpack_require__(353);\n\nvar _OrderDetails2 = _interopRequireDefault(_OrderDetails);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar OrdersNew = function (_Component) {\n  _inherits(OrdersNew, _Component);\n\n  function OrdersNew() {\n    _classCallCheck(this, OrdersNew);\n\n    var _this = _possibleConstructorReturn(this, (OrdersNew.__proto__ || Object.getPrototypeOf(OrdersNew)).call(this));\n\n    _this.state = {\n      stage: 1,\n      selectedGarment: null,\n      selectedAlterations: [],\n      selectedGarmentIndex: null\n    };\n\n    _this.selectGarment = _this.selectGarment.bind(_this);\n    _this.renderStageOne = _this.renderStageOne.bind(_this);\n    _this.addAlteration = _this.addAlteration.bind(_this);\n    _this.addToCart = _this.addToCart.bind(_this);\n    _this.renderOrderDetails = _this.renderOrderDetails.bind(_this);\n    _this.renderSelectAlerations = _this.renderSelectAlterations.bind(_this);\n    return _this;\n  }\n\n  _createClass(OrdersNew, [{\n    key: 'selectGarment',\n    value: function selectGarment(garment) {\n      this.setState({ selectedGarment: garment, stage: 2 });\n    }\n  }, {\n    key: 'renderStageOne',\n    value: function renderStageOne() {\n      this.setState({\n        selectedGarment: null,\n        selectedAlterations: [],\n        stage: 1,\n        selectedGarmentIndex: null }); //, notes: ''});\n    }\n  }, {\n    key: 'renderSelectAlterations',\n    value: function renderSelectAlterations(index, garment, alterations) {\n      console.log('cart here', this.props.cart.garments);\n      delete garment.alterations;\n\n      console.log('renderSelectAlterations', garment);\n      console.log('cart here', this.props.cart.garments);\n      this.setState({\n        selectedGarment: garment,\n        selectedAlterations: alterations,\n        selectedGarmentIndex: index,\n        stage: 2\n      });\n    }\n  }, {\n    key: 'renderOrderDetails',\n    value: function renderOrderDetails() {\n      this.setState({ stage: 3 });\n    }\n  }, {\n    key: 'alterationsIncludeNewSelection',\n    value: function alterationsIncludeNewSelection(newSelectedAlterations, alteration) {\n      for (var i = 0; i < newSelectedAlterations.length; i++) {\n        if (newSelectedAlterations[i] === alteration) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }, {\n    key: 'addAlteration',\n    value: function addAlteration(alteration) {\n      console.log('addAlteration');\n      var newSelectedAlterations = this.state.selectedAlterations;\n      var newList = void 0;\n      if (!this.alterationsIncludeNewSelection(newSelectedAlterations, alteration)) {\n        newList = newSelectedAlterations;\n        newList.push(alteration);\n      } else {\n        newList = newSelectedAlterations.filter(function (alt) {\n          return alt.id !== alteration.id;\n        });\n      }\n      this.setState({ selectedAlterations: newList });\n    }\n  }, {\n    key: 'addToCart',\n    value: function addToCart() {\n      var _state = this.state,\n          selectedGarment = _state.selectedGarment,\n          selectedAlterations = _state.selectedAlterations;\n\n      var garmentForCart = this.state.selectedGarment;\n      garmentForCart.alterations = selectedAlterations;\n      this.props.addGarmentToCart(garmentForCart);\n      this.renderStageOne();\n    }\n  }, {\n    key: 'updateGarment',\n    value: function updateGarment() {\n      var _state2 = this.state,\n          selectedGarment = _state2.selectedGarment,\n          selectedGarmentIndex = _state2.selectedGarmentIndex,\n          selectedAlterations = _state2.selectedAlterations;\n\n      var garmentForCart = this.state.selectedGarment;\n      garmentForCart.alterations = selectedAlterations;\n      this.props.setGarment(garmentForCart, selectedGarmentIndex);\n      this.setState({ stage: 1, selectedGarmentIndex: null, selectedGarment: null, selectedAlterations: [] });\n    }\n  }, {\n    key: 'renderStage',\n    value: function renderStage(stage) {\n      switch (this.state.stage) {\n        case 1:\n          return _react2.default.createElement(_SelectGarment2.default, {\n            handleSelect: this.selectGarment,\n            garments: this.props.garments });\n          break;\n        case 2:\n          return _react2.default.createElement(_SelectAlterations2.default, {\n            addToCart: this.addToCart,\n            handleSelect: this.addAlteration,\n            renderOrderDetails: this.renderOrderDetails,\n            selectedAlterations: this.state.selectedAlterations.map(function (alt) {\n              return alt.id;\n            }),\n            renderStageOne: this.renderStageOne,\n            garmentIndex: this.state.selectedGarmentIndex,\n            updateGarment: this.updateGarment.bind(this),\n            garment: this.state.selectedGarment });\n          break;\n        case 3:\n          return _react2.default.createElement(_OrderDetails2.default, null);\n          break;\n        case 4:\n          return _react2.default.createElement(OrderConfirmation, null);\n          break;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!this.state.selectedGarment && this.props.match.params.index) {\n        //this.editGarment();\n      }\n      console.log('garments', this.props.cart.garments.length);\n      if (this.props.cart.garments.length > 0) {\n        console.log('alterations', this.props.cart.garments[0].alterations.length);\n      }\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(_SectionHeader2.default, {\n          text: 'New Order',\n          rotate: 'rotate',\n          link: '/',\n          showCart: true }),\n        _react2.default.createElement(\n          'div',\n          { className: 'new-order-content' },\n          _react2.default.createElement(\n            'div',\n            { className: 'stage-section' },\n            this.renderStage(this.state.stage)\n          ),\n          _react2.default.createElement(_Cart2.default, {\n            renderSelectAlterations: this.renderSelectAlterations.bind(this),\n            stage: this.state.stage,\n            renderOrderDetails: this.renderOrderDetails })\n        )\n      );\n    }\n  }]);\n\n  return OrdersNew;\n}(_react.Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.currentUser,\n    currentStore: store.currentStore,\n    cart: store.cart,\n    garments: store.garments.garments\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return (0, _redux.bindActionCreators)({ addGarmentToCart: _actions.addGarmentToCart, setGarment: _actions.setGarment }, dispatch);\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(OrdersNew);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jbGllbnQvY29tcG9uZW50cy9vcmRlcnMvbmV3L09yZGVyc05ldy5qcz8xMzZiIl0sIm5hbWVzIjpbIk9yZGVyc05ldyIsInN0YXRlIiwic3RhZ2UiLCJzZWxlY3RlZEdhcm1lbnQiLCJzZWxlY3RlZEFsdGVyYXRpb25zIiwic2VsZWN0ZWRHYXJtZW50SW5kZXgiLCJzZWxlY3RHYXJtZW50IiwiYmluZCIsInJlbmRlclN0YWdlT25lIiwiYWRkQWx0ZXJhdGlvbiIsImFkZFRvQ2FydCIsInJlbmRlck9yZGVyRGV0YWlscyIsInJlbmRlclNlbGVjdEFsZXJhdGlvbnMiLCJyZW5kZXJTZWxlY3RBbHRlcmF0aW9ucyIsImdhcm1lbnQiLCJzZXRTdGF0ZSIsImluZGV4IiwiYWx0ZXJhdGlvbnMiLCJjb25zb2xlIiwibG9nIiwicHJvcHMiLCJjYXJ0IiwiZ2FybWVudHMiLCJuZXdTZWxlY3RlZEFsdGVyYXRpb25zIiwiYWx0ZXJhdGlvbiIsImkiLCJsZW5ndGgiLCJuZXdMaXN0IiwiYWx0ZXJhdGlvbnNJbmNsdWRlTmV3U2VsZWN0aW9uIiwicHVzaCIsImZpbHRlciIsImFsdCIsImlkIiwiZ2FybWVudEZvckNhcnQiLCJhZGRHYXJtZW50VG9DYXJ0Iiwic2V0R2FybWVudCIsIm1hcCIsInVwZGF0ZUdhcm1lbnQiLCJtYXRjaCIsInBhcmFtcyIsInJlbmRlclN0YWdlIiwibWFwU3RhdGVUb1Byb3BzIiwic3RvcmUiLCJjdXJyZW50VXNlciIsImN1cnJlbnRTdG9yZSIsIm1hcERpc3BhdGNoVG9Qcm9wcyIsImRpc3BhdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7O0lBRU1BLFM7OztBQUNKLHVCQUFhO0FBQUE7O0FBQUE7O0FBRVgsVUFBS0MsS0FBTCxHQUFhO0FBQ1hDLGFBQU8sQ0FESTtBQUVYQyx1QkFBaUIs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QUFNckIsSUFIUDtBQUlMQyxjQUFVb0IsTUFBTXBCLFFBQU4sQ0FBZUE7QUFKcEIsR0FBUDtBQU1ELENBUEQ7O0FBU0EsSUFBTXVCLHFCQUFxQixTQUFyQkEsa0JBQXFCLENBQUNDLFFBQUQsRUFBYztBQUN2QyxTQUFPLCtCQUFtQixFQUFDWiwyQ0FBRCxFQUFtQkMsK0JBQW5CLEVBQW5CLEVBQW1EVyxRQUFuRCxDQUFQO0FBQ0QsQ0FGRDs7a0JBSWUseUJBQVFMLGVBQVIsRUFBeUJJLGtCQUF6QixFQUE2QzdDLFNBQTdDLEMiLCJmaWxlIjoiMzU0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHtiaW5kQWN0aW9uQ3JlYXRvcnN9IGZyb20gJ3JlZHV4JztcbmltcG9ydCB7YWRkR2FybWVudFRvQ2FydCwgc2V0R2FybWVudH0gZnJvbSAnLi4vLi4vLi4vYWN0aW9ucyc7XG5pbXBvcnQgU2VsZWN0R2FybWVudCBmcm9tICcuL1NlbGVjdEdhcm1lbnQnO1xuaW1wb3J0IFNlY3Rpb25IZWFkZXIgZnJvbSAnLi4vLi4vU2VjdGlvbkhlYWRlcic7XG5pbXBvcnQgU2VsZWN0QWx0ZXJhdGlvbnMgZnJvbSAnLi9TZWxlY3RBbHRlcmF0aW9ucyc7XG5pbXBvcnQgQ2FydCBmcm9tICcuL0NhcnQnO1xuaW1wb3J0IE9yZGVyRGV0YWlscyBmcm9tICcuL09yZGVyRGV0YWlscyc7XG5cbmNsYXNzIE9yZGVyc05ldyBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc3RhZ2U6IDEsXG4gICAgICBzZWxlY3RlZEdhcm1lbnQ6IG51bGwsXG4gICAgICBzZWxlY3RlZEFsdGVyYXRpb25zOiBbXSxcbiAgICAgIHNlbGVjdGVkR2FybWVudEluZGV4OiBudWxsXG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RHYXJtZW50ID0gdGhpcy5zZWxlY3RHYXJtZW50LmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW5kZXJTdGFnZU9uZSA9IHRoaXMucmVuZGVyU3RhZ2VPbmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkZEFsdGVyYXRpb24gPSB0aGlzLmFkZEFsdGVyYXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkZFRvQ2FydCA9IHRoaXMuYWRkVG9DYXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW5kZXJPcmRlckRldGFpbHMgPSB0aGlzLnJlbmRlck9yZGVyRGV0YWlscy5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVuZGVyU2VsZWN0QWxlcmF0aW9ucyA9IHRoaXMucmVuZGVyU2VsZWN0QWx0ZXJhdGlvbnMuYmluZCh0aGlzKTtcbiAgfVxuXG5cbiAgc2VsZWN0R2FybWVudChnYXJtZW50KXtcbiAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZEdhcm1lbnQ6IGdhcm1lbnQsIHN0YWdlOiAyfSk7XG4gIH1cblxuICByZW5kZXJTdGFnZU9uZSgpe1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VsZWN0ZWRHYXJtZW50OiBudWxsLCBcbiAgICAgIHNlbGVjdGVkQWx0ZXJhdGlvbnM6IFtdLCBcbiAgICAgIHN0YWdlOiAxLCBcbiAgICAgIHNlbGVjdGVkR2FybWVudEluZGV4OiBudWxsfSkvLywgbm90ZXM6ICcnfSk7XG4gIH1cblxuICByZW5kZXJTZWxlY3RBbHRlcmF0aW9ucyhpbmRleCwgZ2FybWVudCwgYWx0ZXJhdGlvbnMpe1xuICAgIGNvbnNvbGUubG9nKCdjYXJ0IGhlcmUnLCB0aGlzLnByb3BzLmNhcnQuZ2FybWVudHMpO1xuICAgIGRlbGV0ZSBnYXJtZW50LmFsdGVyYXRpb25zXG5cbiAgICBjb25zb2xlLmxvZygncmVuZGVyU2VsZWN0QWx0ZXJhdGlvbnMnLCBnYXJtZW50KTtcbiAgICBjb25zb2xlLmxvZygnY2FydCBoZXJlJywgdGhpcy5wcm9wcy5jYXJ0Lmdhcm1lbnRzKTtcbiAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICBzZWxlY3RlZEdhcm1lbnQ6IGdhcm1lbnQsIFxuICAgICAgc2VsZWN0ZWRBbHRlcmF0aW9uczogYWx0ZXJhdGlvbnMsXG4gICAgICBzZWxlY3RlZEdhcm1lbnRJbmRleDogaW5kZXgsXG4gICAgICBzdGFnZTogMlxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyT3JkZXJEZXRhaWxzKCl7XG4gICAgdGhpcy5zZXRTdGF0ZSh7c3RhZ2U6IDN9KTtcbiAgfVxuXG5cbiAgYWx0ZXJhdGlvbnNJbmNsdWRlTmV3U2VsZWN0aW9uKG5ld1NlbGVjdGVkQWx0ZXJhdGlvbnMsIGFsdGVyYXRpb24pe1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3U2VsZWN0ZWRBbHRlcmF0aW9ucy5sZW5ndGg7IGkrKyl7XG4gICAgICBpZiAobmV3U2VsZWN0ZWRBbHRlcmF0aW9uc1tpXSA9PT0gYWx0ZXJhdGlvbil7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFkZEFsdGVyYXRpb24oYWx0ZXJhdGlvbil7XG4gICAgY29uc29sZS5sb2coJ2FkZEFsdGVyYXRpb24nKTtcbiAgICBjb25zdCBuZXdTZWxlY3RlZEFsdGVyYXRpb25zID0gdGhpcy5zdGF0ZS5zZWxlY3RlZEFsdGVyYXRpb25zO1xuICAgIGxldCBuZXdMaXN0O1xuICAgIGlmICghdGhpcy5hbHRlcmF0aW9uc0luY2x1ZGVOZXdTZWxlY3Rpb24obmV3U2VsZWN0ZWRBbHRlcmF0aW9ucywgYWx0ZXJhdGlvbikpIHtcbiAgICAgIG5ld0xpc3QgPSBuZXdTZWxlY3RlZEFsdGVyYXRpb25zO1xuICAgICAgbmV3TGlzdC5wdXNoKGFsdGVyYXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdMaXN0ID0gbmV3U2VsZWN0ZWRBbHRlcmF0aW9ucy5maWx0ZXIoYWx0ID0+IGFsdC5pZCAhPT0gYWx0ZXJhdGlvbi5pZCk7XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkQWx0ZXJhdGlvbnM6IG5ld0xpc3R9KTtcbiAgfVxuXG4gIGFkZFRvQ2FydCgpe1xuICAgIGNvbnN0IHtzZWxlY3RlZEdhcm1lbnQsIHNlbGVjdGVkQWx0ZXJhdGlvbnN9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBnYXJtZW50Rm9yQ2FydCA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRHYXJtZW50O1xuICAgIGdhcm1lbnRGb3JDYXJ0LmFsdGVyYXRpb25zID0gc2VsZWN0ZWRBbHRlcmF0aW9ucztcbiAgICB0aGlzLnByb3BzLmFkZEdhcm1lbnRUb0NhcnQoZ2FybWVudEZvckNhcnQpO1xuICAgIHRoaXMucmVuZGVyU3RhZ2VPbmUoKTtcbiAgfVxuXG4gIHVwZGF0ZUdhcm1lbnQoKXtcbiAgICBjb25zdCB7c2VsZWN0ZWRHYXJtZW50LCBzZWxlY3RlZEdhcm1lbnRJbmRleCwgc2VsZWN0ZWRBbHRlcmF0aW9uc30gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGdhcm1lbnRGb3JDYXJ0ID0gdGhpcy5zdGF0ZS5zZWxlY3RlZEdhcm1lbnQ7XG4gICAgZ2FybWVudEZvckNhcnQuYWx0ZXJhdGlvbnMgPSBzZWxlY3RlZEFsdGVyYXRpb25zO1xuICAgIHRoaXMucHJvcHMuc2V0R2FybWVudChnYXJtZW50Rm9yQ2FydCwgc2VsZWN0ZWRHYXJtZW50SW5kZXgpO1xuICAgIHRoaXMuc2V0U3RhdGUoe3N0YWdlOiAxLCBzZWxlY3RlZEdhcm1lbnRJbmRleDogbnVsbCwgc2VsZWN0ZWRHYXJtZW50OiBudWxsLCBzZWxlY3RlZEFsdGVyYXRpb25zOiBbXX0pO1xuICB9XG5cbiAgcmVuZGVyU3RhZ2Uoc3RhZ2Upe1xuICAgIHN3aXRjaCAodGhpcy5zdGF0ZS5zdGFnZSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gPFNlbGVjdEdhcm1lbnRcbiAgICAgICAgICAgICAgICAgaGFuZGxlU2VsZWN0PXt0aGlzLnNlbGVjdEdhcm1lbnR9XG4gICAgICAgICAgICAgICAgIGdhcm1lbnRzPXt0aGlzLnByb3BzLmdhcm1lbnRzfSAvPlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIDxTZWxlY3RBbHRlcmF0aW9uc1xuICAgICAgICAgICAgICAgICBhZGRUb0NhcnQ9e3RoaXMuYWRkVG9DYXJ0fVxuICAgICAgICAgICAgICAgICBoYW5kbGVTZWxlY3Q9e3RoaXMuYWRkQWx0ZXJhdGlvbn1cbiAgICAgICAgICAgICAgICAgcmVuZGVyT3JkZXJEZXRhaWxzPXt0aGlzLnJlbmRlck9yZGVyRGV0YWlsc31cbiAgICAgICAgICAgICAgICAgc2VsZWN0ZWRBbHRlcmF0aW9ucz17dGhpcy5zdGF0ZS5zZWxlY3RlZEFsdGVyYXRpb25zLm1hcChhbHQgPT4gYWx0LmlkKX1cbiAgICAgICAgICAgICAgICAgcmVuZGVyU3RhZ2VPbmU9e3RoaXMucmVuZGVyU3RhZ2VPbmV9XG4gICAgICAgICAgICAgICAgIGdhcm1lbnRJbmRleD17dGhpcy5zdGF0ZS5zZWxlY3RlZEdhcm1lbnRJbmRleH1cbiAgICAgICAgICAgICAgICAgdXBkYXRlR2FybWVudD17dGhpcy51cGRhdGVHYXJtZW50LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgIGdhcm1lbnQ9e3RoaXMuc3RhdGUuc2VsZWN0ZWRHYXJtZW50fSAvPlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuIDxPcmRlckRldGFpbHMgLz5cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHJldHVybiA8T3JkZXJDb25maXJtYXRpb24gLz5cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCl7XG4gICAgaWYgKCF0aGlzLnN0YXRlLnNlbGVjdGVkR2FybWVudCAmJiB0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5pbmRleCl7XG4gICAgICAvL3RoaXMuZWRpdEdhcm1lbnQoKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ2dhcm1lbnRzJywgdGhpcy5wcm9wcy5jYXJ0Lmdhcm1lbnRzLmxlbmd0aClcbiAgICBpZiAodGhpcy5wcm9wcy5jYXJ0Lmdhcm1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdhbHRlcmF0aW9ucycsIHRoaXMucHJvcHMuY2FydC5nYXJtZW50c1swXS5hbHRlcmF0aW9ucy5sZW5ndGgpO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPFNlY3Rpb25IZWFkZXIgXG4gICAgICAgICAgdGV4dD0nTmV3IE9yZGVyJyBcbiAgICAgICAgICByb3RhdGU9eydyb3RhdGUnfVxuICAgICAgICAgIGxpbms9eycvJ31cbiAgICAgICAgICBzaG93Q2FydD17dHJ1ZX0gLz5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbmV3LW9yZGVyLWNvbnRlbnQnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzdGFnZS1zZWN0aW9uJz5cbiAgICAgICAgICAgIHt0aGlzLnJlbmRlclN0YWdlKHRoaXMuc3RhdGUuc3RhZ2UpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxDYXJ0IFxuICAgICAgICAgICAgcmVuZGVyU2VsZWN0QWx0ZXJhdGlvbnM9e3RoaXMucmVuZGVyU2VsZWN0QWx0ZXJhdGlvbnMuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIHN0YWdlPXt0aGlzLnN0YXRlLnN0YWdlfSBcbiAgICAgICAgICAgIHJlbmRlck9yZGVyRGV0YWlscz17dGhpcy5yZW5kZXJPcmRlckRldGFpbHN9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RvcmUpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBjdXJyZW50VXNlcjogc3RvcmUuY3VycmVudFVzZXIsXG4gICAgY3VycmVudFN0b3JlOiBzdG9yZS5jdXJyZW50U3RvcmUsXG4gICAgY2FydDogc3RvcmUuY2FydCxcbiAgICBnYXJtZW50czogc3RvcmUuZ2FybWVudHMuZ2FybWVudHNcbiAgfVxufVxuXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSAoZGlzcGF0Y2gpID0+IHtcbiAgcmV0dXJuIGJpbmRBY3Rpb25DcmVhdG9ycyh7YWRkR2FybWVudFRvQ2FydCwgc2V0R2FybWVudH0sIGRpc3BhdGNoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoT3JkZXJzTmV3KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NsaWVudC9jb21wb25lbnRzL29yZGVycy9uZXcvT3JkZXJzTmV3LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ })

})