webpackHotUpdate(0,{

/***/ 354:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(5);\n\nvar _redux = __webpack_require__(7);\n\nvar _actions = __webpack_require__(8);\n\nvar _SelectGarment = __webpack_require__(355);\n\nvar _SelectGarment2 = _interopRequireDefault(_SelectGarment);\n\nvar _SectionHeader = __webpack_require__(19);\n\nvar _SectionHeader2 = _interopRequireDefault(_SectionHeader);\n\nvar _SelectAlterations = __webpack_require__(112);\n\nvar _SelectAlterations2 = _interopRequireDefault(_SelectAlterations);\n\nvar _Cart = __webpack_require__(350);\n\nvar _Cart2 = _interopRequireDefault(_Cart);\n\nvar _OrderDetails = __webpack_require__(353);\n\nvar _OrderDetails2 = _interopRequireDefault(_OrderDetails);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar OrdersNew = function (_Component) {\n  _inherits(OrdersNew, _Component);\n\n  function OrdersNew() {\n    _classCallCheck(this, OrdersNew);\n\n    var _this = _possibleConstructorReturn(this, (OrdersNew.__proto__ || Object.getPrototypeOf(OrdersNew)).call(this));\n\n    _this.state = {\n      stage: 1,\n      selectedGarment: null,\n      selectedAlterations: [],\n      selectedGarmentIndex: null\n    };\n\n    _this.selectGarment = _this.selectGarment.bind(_this);\n    _this.renderStageOne = _this.renderStageOne.bind(_this);\n    _this.addAlteration = _this.addAlteration.bind(_this);\n    _this.addToCart = _this.addToCart.bind(_this);\n    _this.renderOrderDetails = _this.renderOrderDetails.bind(_this);\n    _this.renderSelectAlerations = _this.renderSelectAlterations.bind(_this);\n    return _this;\n  }\n\n  _createClass(OrdersNew, [{\n    key: 'selectGarment',\n    value: function selectGarment(garment) {\n      this.setState({ selectedGarment: garment, stage: 2 });\n    }\n  }, {\n    key: 'renderStageOne',\n    value: function renderStageOne() {\n      this.setState({\n        selectedGarment: null,\n        selectedAlterations: [],\n        stage: 1,\n        selectedGarmentIndex: null }); //, notes: ''});\n    }\n  }, {\n    key: 'renderSelectAlterations',\n    value: function renderSelectAlterations(index, garment, alterations) {\n      delete garment.alterations;\n      console.log('renderSelectAlterations');\n      this.setState({\n        selectedGarment: garment,\n        selectedAlterations: alterations,\n        selectedGarmentIndex: index,\n        stage: 2\n      });\n    }\n  }, {\n    key: 'renderOrderDetails',\n    value: function renderOrderDetails() {\n      this.setState({ stage: 3 });\n    }\n  }, {\n    key: 'alterationsIncludeNewSelection',\n    value: function alterationsIncludeNewSelection(newSelectedAlterations, alteration) {\n      for (var i = 0; i < newSelectedAlterations.length; i++) {\n        if (newSelectedAlterations[i] === alteration) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }, {\n    key: 'addAlteration',\n    value: function addAlteration(alteration) {\n      console.log('addAlteration');\n      var newSelectedAlterations = this.state.selectedAlterations;\n      var newList = void 0;\n      if (!this.alterationsIncludeNewSelection(newSelectedAlterations, alteration)) {\n        newList = newSelectedAlterations;\n        newList.push(alteration);\n      } else {\n        newList = newSelectedAlterations.filter(function (alt) {\n          return alt.id !== alteration.id;\n        });\n      }\n      this.setState({ selectedAlterations: newList });\n    }\n  }, {\n    key: 'addToCart',\n    value: function addToCart() {\n      var _state = this.state,\n          selectedGarment = _state.selectedGarment,\n          selectedAlterations = _state.selectedAlterations;\n\n      var garmentForCart = this.state.selectedGarment;\n      garmentForCart.alterations = selectedAlterations;\n      this.props.addGarmentToCart(garmentForCart);\n      this.renderStageOne();\n    }\n  }, {\n    key: 'updateGarment',\n    value: function updateGarment() {\n      var _state2 = this.state,\n          selectedGarment = _state2.selectedGarment,\n          selectedGarmentIndex = _state2.selectedGarmentIndex,\n          selectedAlterations = _state2.selectedAlterations;\n\n      var garmentForCart = this.state.selectedGarment;\n      garmentForCart.alterations = selectedAlterations;\n      this.props.setGarment(garmentForCart, selectedGarmentIndex);\n      this.setState({ stage: 1, selectedGarmentIndex: null, selectedGarment: null, selectedAlterations: [] });\n    }\n  }, {\n    key: 'renderStage',\n    value: function renderStage(stage) {\n      switch (this.state.stage) {\n        case 1:\n          return _react2.default.createElement(_SelectGarment2.default, {\n            handleSelect: this.selectGarment,\n            garments: this.props.garments });\n          break;\n        case 2:\n          return _react2.default.createElement(_SelectAlterations2.default, {\n            addToCart: this.addToCart,\n            handleSelect: this.addAlteration,\n            renderOrderDetails: this.renderOrderDetails,\n            selectedAlterations: this.state.selectedAlterations.map(function (alt) {\n              return alt.id;\n            }),\n            renderStageOne: this.renderStageOne,\n            garmentIndex: this.state.selectedGarmentIndex,\n            updateGarment: this.updateGarment.bind(this),\n            garment: this.state.selectedGarment });\n          break;\n        case 3:\n          return _react2.default.createElement(_OrderDetails2.default, null);\n          break;\n        case 4:\n          return _react2.default.createElement(OrderConfirmation, null);\n          break;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!this.state.selectedGarment && this.props.match.params.index) {\n        //this.editGarment();\n      }\n      console.log('garments', this.props.cart.garments.length);\n      if (this.props.cart.garments.length > 0) {\n        console.log('alterations', this.props.cart.garments[0].alterations.length);\n      }\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(_SectionHeader2.default, {\n          text: 'New Order',\n          rotate: 'rotate',\n          link: '/',\n          showCart: true }),\n        _react2.default.createElement(\n          'div',\n          { className: 'new-order-content' },\n          _react2.default.createElement(\n            'div',\n            { className: 'stage-section' },\n            this.renderStage(this.state.stage)\n          ),\n          _react2.default.createElement(_Cart2.default, {\n            renderSelectAlterations: this.renderSelectAlterations.bind(this),\n            selectGarmrent: this.selectGarment,\n            stage: this.state.stage,\n            renderOrderDetails: this.renderOrderDetails })\n        )\n      );\n    }\n  }]);\n\n  return OrdersNew;\n}(_react.Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.currentUser,\n    currentStore: store.currentStore,\n    cart: store.cart,\n    garments: store.garments.garments\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return (0, _redux.bindActionCreators)({ addGarmentToCart: _actions.addGarmentToCart, setGarment: _actions.setGarment }, dispatch);\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(OrdersNew);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jbGllbnQvY29tcG9uZW50cy9vcmRlcnMvbmV3L09yZGVyc05ldy5qcz8xMzZiIl0sIm5hbWVzIjpbIk9yZGVyc05ldyIsInN0YXRlIiwic3RhZ2UiLCJzZWxlY3RlZEdhcm1lbnQiLCJzZWxlY3RlZEFsdGVyYXRpb25zIiwic2VsZWN0ZWRHYXJtZW50SW5kZXgiLCJzZWxlY3RHYXJtZW50IiwiYmluZCIsInJlbmRlclN0YWdlT25lIiwiYWRkQWx0ZXJhdGlvbiIsImFkZFRvQ2FydCIsInJlbmRlck9yZGVyRGV0YWlscyIsInJlbmRlclNlbGVjdEFsZXJhdGlvbnMiLCJyZW5kZXJTZWxlY3RBbHRlcmF0aW9ucyIsImdhcm1lbnQiLCJzZXRTdGF0ZSIsImluZGV4IiwiYWx0ZXJhdGlvbnMiLCJjb25zb2xlIiwibG9nIiwibmV3U2VsZWN0ZWRBbHRlcmF0aW9ucyIsImFsdGVyYXRpb24iLCJpIiwibGVuZ3RoIiwibmV3TGlzdCIsImFsdGVyYXRpb25zSW5jbHVkZU5ld1NlbGVjdGlvbiIsInB1c2giLCJmaWx0ZXIiLCJhbHQiLCJpZCIsImdhcm1lbnRGb3JDYXJ0IiwicHJvcHMiLCJhZGRHYXJtZW50VG9DYXJ0Iiwic2V0R2FybWVudCIsImdhcm1lbnRzIiwibWFwIiwidXBkYXRlR2FybWVudCIsIm1hdGNoIiwicGFyYW1zIiwiY2FydCIsInJlbmRlclN0YWdlIiwibWFwU3RhdGVUb1Byb3BzIiwic3RvcmUiLCJjdXJyZW50VXNlciIsImN1cnJlbnRTdG9yZSIsIm1hcERpc3BhdGNoVG9Qcm9wcyIsImRpc3BhdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7O0lBRU1BLFM7OztBQUNKLHVCQUFhO0FBQUE7O0FBQUE7O0FBRVgsVUFBS0MsS0FBTCxHQUFhO0FBQ1hDLGFBQU8sQ0FESTtBQUVYQyx1QkFBaUIs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QUFDZCwyQ0FBRCxFQUFtQkMsK0JBQW5CLEVBQW5CLEVBQW1EYSxRQUFuRCxDQUFQO0FBQ0QsQ0FGRDs7a0JBSWUseUJBQVFMLGVBQVIsRUFBeUJJLGtCQUF6QixFQUE2QzdDLFNBQTdDLEMiLCJmaWxlIjoiMzU0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHtiaW5kQWN0aW9uQ3JlYXRvcnN9IGZyb20gJ3JlZHV4JztcbmltcG9ydCB7YWRkR2FybWVudFRvQ2FydCwgc2V0R2FybWVudH0gZnJvbSAnLi4vLi4vLi4vYWN0aW9ucyc7XG5pbXBvcnQgU2VsZWN0R2FybWVudCBmcm9tICcuL1NlbGVjdEdhcm1lbnQnO1xuaW1wb3J0IFNlY3Rpb25IZWFkZXIgZnJvbSAnLi4vLi4vU2VjdGlvbkhlYWRlcic7XG5pbXBvcnQgU2VsZWN0QWx0ZXJhdGlvbnMgZnJvbSAnLi9TZWxlY3RBbHRlcmF0aW9ucyc7XG5pbXBvcnQgQ2FydCBmcm9tICcuL0NhcnQnO1xuaW1wb3J0IE9yZGVyRGV0YWlscyBmcm9tICcuL09yZGVyRGV0YWlscyc7XG5cbmNsYXNzIE9yZGVyc05ldyBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc3RhZ2U6IDEsXG4gICAgICBzZWxlY3RlZEdhcm1lbnQ6IG51bGwsXG4gICAgICBzZWxlY3RlZEFsdGVyYXRpb25zOiBbXSxcbiAgICAgIHNlbGVjdGVkR2FybWVudEluZGV4OiBudWxsXG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RHYXJtZW50ID0gdGhpcy5zZWxlY3RHYXJtZW50LmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW5kZXJTdGFnZU9uZSA9IHRoaXMucmVuZGVyU3RhZ2VPbmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkZEFsdGVyYXRpb24gPSB0aGlzLmFkZEFsdGVyYXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkZFRvQ2FydCA9IHRoaXMuYWRkVG9DYXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW5kZXJPcmRlckRldGFpbHMgPSB0aGlzLnJlbmRlck9yZGVyRGV0YWlscy5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVuZGVyU2VsZWN0QWxlcmF0aW9ucyA9IHRoaXMucmVuZGVyU2VsZWN0QWx0ZXJhdGlvbnMuYmluZCh0aGlzKTtcbiAgfVxuXG5cbiAgc2VsZWN0R2FybWVudChnYXJtZW50KXtcbiAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZEdhcm1lbnQ6IGdhcm1lbnQsIHN0YWdlOiAyfSk7XG4gIH1cblxuICByZW5kZXJTdGFnZU9uZSgpe1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VsZWN0ZWRHYXJtZW50OiBudWxsLCBcbiAgICAgIHNlbGVjdGVkQWx0ZXJhdGlvbnM6IFtdLCBcbiAgICAgIHN0YWdlOiAxLCBcbiAgICAgIHNlbGVjdGVkR2FybWVudEluZGV4OiBudWxsfSkvLywgbm90ZXM6ICcnfSk7XG4gIH1cblxuICByZW5kZXJTZWxlY3RBbHRlcmF0aW9ucyhpbmRleCwgZ2FybWVudCwgYWx0ZXJhdGlvbnMpe1xuICAgIGRlbGV0ZSBnYXJtZW50LmFsdGVyYXRpb25zXG4gICAgY29uc29sZS5sb2coJ3JlbmRlclNlbGVjdEFsdGVyYXRpb25zJyk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IFxuICAgICAgc2VsZWN0ZWRHYXJtZW50OiBnYXJtZW50LCBcbiAgICAgIHNlbGVjdGVkQWx0ZXJhdGlvbnM6IGFsdGVyYXRpb25zLFxuICAgICAgc2VsZWN0ZWRHYXJtZW50SW5kZXg6IGluZGV4LFxuICAgICAgc3RhZ2U6IDJcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlck9yZGVyRGV0YWlscygpe1xuICAgIHRoaXMuc2V0U3RhdGUoe3N0YWdlOiAzfSk7XG4gIH1cblxuXG4gIGFsdGVyYXRpb25zSW5jbHVkZU5ld1NlbGVjdGlvbihuZXdTZWxlY3RlZEFsdGVyYXRpb25zLCBhbHRlcmF0aW9uKXtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld1NlbGVjdGVkQWx0ZXJhdGlvbnMubGVuZ3RoOyBpKyspe1xuICAgICAgaWYgKG5ld1NlbGVjdGVkQWx0ZXJhdGlvbnNbaV0gPT09IGFsdGVyYXRpb24pe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhZGRBbHRlcmF0aW9uKGFsdGVyYXRpb24pe1xuICAgIGNvbnNvbGUubG9nKCdhZGRBbHRlcmF0aW9uJyk7XG4gICAgY29uc3QgbmV3U2VsZWN0ZWRBbHRlcmF0aW9ucyA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRBbHRlcmF0aW9ucztcbiAgICBsZXQgbmV3TGlzdDtcbiAgICBpZiAoIXRoaXMuYWx0ZXJhdGlvbnNJbmNsdWRlTmV3U2VsZWN0aW9uKG5ld1NlbGVjdGVkQWx0ZXJhdGlvbnMsIGFsdGVyYXRpb24pKSB7XG4gICAgICBuZXdMaXN0ID0gbmV3U2VsZWN0ZWRBbHRlcmF0aW9ucztcbiAgICAgIG5ld0xpc3QucHVzaChhbHRlcmF0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3TGlzdCA9IG5ld1NlbGVjdGVkQWx0ZXJhdGlvbnMuZmlsdGVyKGFsdCA9PiBhbHQuaWQgIT09IGFsdGVyYXRpb24uaWQpO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZEFsdGVyYXRpb25zOiBuZXdMaXN0fSk7XG4gIH1cblxuICBhZGRUb0NhcnQoKXtcbiAgICBjb25zdCB7c2VsZWN0ZWRHYXJtZW50LCBzZWxlY3RlZEFsdGVyYXRpb25zfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgZ2FybWVudEZvckNhcnQgPSB0aGlzLnN0YXRlLnNlbGVjdGVkR2FybWVudDtcbiAgICBnYXJtZW50Rm9yQ2FydC5hbHRlcmF0aW9ucyA9IHNlbGVjdGVkQWx0ZXJhdGlvbnM7XG4gICAgdGhpcy5wcm9wcy5hZGRHYXJtZW50VG9DYXJ0KGdhcm1lbnRGb3JDYXJ0KTtcbiAgICB0aGlzLnJlbmRlclN0YWdlT25lKCk7XG4gIH1cblxuICB1cGRhdGVHYXJtZW50KCl7XG4gICAgY29uc3Qge3NlbGVjdGVkR2FybWVudCwgc2VsZWN0ZWRHYXJtZW50SW5kZXgsIHNlbGVjdGVkQWx0ZXJhdGlvbnN9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBnYXJtZW50Rm9yQ2FydCA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRHYXJtZW50O1xuICAgIGdhcm1lbnRGb3JDYXJ0LmFsdGVyYXRpb25zID0gc2VsZWN0ZWRBbHRlcmF0aW9ucztcbiAgICB0aGlzLnByb3BzLnNldEdhcm1lbnQoZ2FybWVudEZvckNhcnQsIHNlbGVjdGVkR2FybWVudEluZGV4KTtcbiAgICB0aGlzLnNldFN0YXRlKHtzdGFnZTogMSwgc2VsZWN0ZWRHYXJtZW50SW5kZXg6IG51bGwsIHNlbGVjdGVkR2FybWVudDogbnVsbCwgc2VsZWN0ZWRBbHRlcmF0aW9uczogW119KTtcbiAgfVxuXG4gIHJlbmRlclN0YWdlKHN0YWdlKXtcbiAgICBzd2l0Y2ggKHRoaXMuc3RhdGUuc3RhZ2UpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIDxTZWxlY3RHYXJtZW50XG4gICAgICAgICAgICAgICAgIGhhbmRsZVNlbGVjdD17dGhpcy5zZWxlY3RHYXJtZW50fVxuICAgICAgICAgICAgICAgICBnYXJtZW50cz17dGhpcy5wcm9wcy5nYXJtZW50c30gLz5cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiA8U2VsZWN0QWx0ZXJhdGlvbnNcbiAgICAgICAgICAgICAgICAgYWRkVG9DYXJ0PXt0aGlzLmFkZFRvQ2FydH1cbiAgICAgICAgICAgICAgICAgaGFuZGxlU2VsZWN0PXt0aGlzLmFkZEFsdGVyYXRpb259XG4gICAgICAgICAgICAgICAgIHJlbmRlck9yZGVyRGV0YWlscz17dGhpcy5yZW5kZXJPcmRlckRldGFpbHN9XG4gICAgICAgICAgICAgICAgIHNlbGVjdGVkQWx0ZXJhdGlvbnM9e3RoaXMuc3RhdGUuc2VsZWN0ZWRBbHRlcmF0aW9ucy5tYXAoYWx0ID0+IGFsdC5pZCl9XG4gICAgICAgICAgICAgICAgIHJlbmRlclN0YWdlT25lPXt0aGlzLnJlbmRlclN0YWdlT25lfVxuICAgICAgICAgICAgICAgICBnYXJtZW50SW5kZXg9e3RoaXMuc3RhdGUuc2VsZWN0ZWRHYXJtZW50SW5kZXh9XG4gICAgICAgICAgICAgICAgIHVwZGF0ZUdhcm1lbnQ9e3RoaXMudXBkYXRlR2FybWVudC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICBnYXJtZW50PXt0aGlzLnN0YXRlLnNlbGVjdGVkR2FybWVudH0gLz5cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiA8T3JkZXJEZXRhaWxzIC8+XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0OlxuICAgICAgICByZXR1cm4gPE9yZGVyQ29uZmlybWF0aW9uIC8+XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpe1xuICAgIGlmICghdGhpcy5zdGF0ZS5zZWxlY3RlZEdhcm1lbnQgJiYgdGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMuaW5kZXgpe1xuICAgICAgLy90aGlzLmVkaXRHYXJtZW50KCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdnYXJtZW50cycsIHRoaXMucHJvcHMuY2FydC5nYXJtZW50cy5sZW5ndGgpXG4gICAgaWYgKHRoaXMucHJvcHMuY2FydC5nYXJtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnYWx0ZXJhdGlvbnMnLCB0aGlzLnByb3BzLmNhcnQuZ2FybWVudHNbMF0uYWx0ZXJhdGlvbnMubGVuZ3RoKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxTZWN0aW9uSGVhZGVyIFxuICAgICAgICAgIHRleHQ9J05ldyBPcmRlcicgXG4gICAgICAgICAgcm90YXRlPXsncm90YXRlJ31cbiAgICAgICAgICBsaW5rPXsnLyd9XG4gICAgICAgICAgc2hvd0NhcnQ9e3RydWV9IC8+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J25ldy1vcmRlci1jb250ZW50Jz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3RhZ2Utc2VjdGlvbic+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJTdGFnZSh0aGlzLnN0YXRlLnN0YWdlKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8Q2FydCBcbiAgICAgICAgICAgIHJlbmRlclNlbGVjdEFsdGVyYXRpb25zPXt0aGlzLnJlbmRlclNlbGVjdEFsdGVyYXRpb25zLmJpbmQodGhpcyl9XG4gICAgICAgICAgICBzZWxlY3RHYXJtcmVudD17dGhpcy5zZWxlY3RHYXJtZW50fSBcbiAgICAgICAgICAgIHN0YWdlPXt0aGlzLnN0YXRlLnN0YWdlfSBcbiAgICAgICAgICAgIHJlbmRlck9yZGVyRGV0YWlscz17dGhpcy5yZW5kZXJPcmRlckRldGFpbHN9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RvcmUpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBjdXJyZW50VXNlcjogc3RvcmUuY3VycmVudFVzZXIsXG4gICAgY3VycmVudFN0b3JlOiBzdG9yZS5jdXJyZW50U3RvcmUsXG4gICAgY2FydDogc3RvcmUuY2FydCxcbiAgICBnYXJtZW50czogc3RvcmUuZ2FybWVudHMuZ2FybWVudHNcbiAgfVxufVxuXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSAoZGlzcGF0Y2gpID0+IHtcbiAgcmV0dXJuIGJpbmRBY3Rpb25DcmVhdG9ycyh7YWRkR2FybWVudFRvQ2FydCwgc2V0R2FybWVudH0sIGRpc3BhdGNoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoT3JkZXJzTmV3KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NsaWVudC9jb21wb25lbnRzL29yZGVycy9uZXcvT3JkZXJzTmV3LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ })

})