{"version":3,"sources":["webpack:///./client/components/search/searchResults.js"],"names":["mapStateToProps","currentUser","store","currentStore","searchResults","SearchResults","dueDate","late","todaysDate","Date","momentDueDate","diff","additionalString","status","toUpperCase","order","due_date","color","dueTime","formatDueDate","fulfilled","props","map","i","orderStatus","getOrderStatus","id","customer","alterations_count","first_name","last_name","route","headerText","name","renderOrderRows"],"mappings":"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","file":"19.8e17dbfc1bac700a027c.js","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport { Redirect, Link } from 'react-router-dom';\nimport SectionHeader from '../SectionHeader';\n\nconst mapStateToProps = store => {\n  return {\n    currentUser: store.currentUser,\n    currentStore: store.currentStore,\n    searchResults: store.searchResults,\n  };\n};\n\nclass SearchResults extends Component {\n  formatDueDate(dueDate, late) {\n    const todaysDate = moment(new Date());\n    const momentDueDate = moment(dueDate);\n    const diff = momentDueDate.diff(todaysDate, 'days');\n    const additionalString = late ? ' days late' : ' days to go';\n    const status = (diff + additionalString).toUpperCase();\n    return status;\n  }\n\n  getOrderStatus(order) {\n    if (!order.due_date) {\n      return { status: 'In Transit', color: 'green' };\n    } else if (order.late) {\n      let dueTime = this.formatDueDate(order.due_date, true);\n      return { status: dueTime, color: 'red' };\n    } else if (order.fulfilled) {\n      return { status: 'Fulfilled', color: 'green' }\n    } else {\n      let dueTime = this.formatDueDate(order.due_date, false);\n      return { status: dueTime, color: 'orange' };\n    }\n  }\n\n  renderOrderRows() {\n    const { searchResults } = this.props;\n    if (searchResults) {\n      return searchResults.map((order, i) => {\n        const orderStatus = this.getOrderStatus(order);\n        const { id, customer, alterations_count } = order;\n        const { first_name, last_name } = customer;\n        const { color, status } = orderStatus;\n        const route = `/orders/${id}`;\n        return (\n          <div key={id}>\n            <div className=\"order-row\">\n              <Link to={route} className=\"order-row-link\">\n                <div className=\"order-data-cell\">#{id}</div>\n                <div className=\"order-data-cell\" style={{ color }}>\n                  {status}\n                </div>\n                <div className=\"order-data-cell\">\n                  {first_name} {last_name}\n                </div>\n                <div className=\"order-data-cell\">{alterations_count}</div>\n              </Link>\n            </div>\n            <hr className=\"order-row-break-row\" />\n          </div>\n        );\n      });\n    } else {\n      return <div>Loading...</div>;\n    }\n  }\n\n  render() {\n    if (!this.props.currentStore) {\n      return <Redirect to=\"/\" />;\n    }\n    const headerText = `Orders / ${this.props.currentStore.name}`;\n    return (\n      <div>\n        <SectionHeader text={headerText} />\n        <div className=\"orders\">\n          <div className=\"order-headers-container\">\n            <div className=\"order-headers-row\">\n              <h3 className=\"order-data-header-cell\">Order</h3>\n              <h3 className=\"order-data-header-cell\">Status</h3>\n              <h3 className=\"order-data-header-cell\">Customer</h3>\n              <h3 className=\"order-data-header-cell\">Quantity</h3>\n            </div>\n          </div>\n          <div className=\"order-header-break-row\" />\n          <div className=\"order-data-container\">{this.renderOrderRows()}</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps)(SearchResults);\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/search/searchResults.js"],"sourceRoot":""}