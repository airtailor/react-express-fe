webpackJsonp([1],{335:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),c=n(i),d=r(15),f=r(19),p=r(8),h=r(4),m=n(h),y=r(39),b=n(y),O=r(25),v=r(327),_=r(719),w=n(_),g=r(723),E=n(g),S=function(e){return{currentUser:e.currentUser,currentStore:e.currentStore,openOrders:e.storeOrders,userRoles:e.userRoles}},j=function(e){return(0,f.bindActionCreators)({getStoreOrders:O.getStoreOrders,setLoader:O.setLoader,removeLoader:O.removeLoader,setGrowler:O.setGrowler},e)},k=function(e){function t(e){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.timer=function(){(0,v.waitingForPostmatesUpdate)(r.props.openOrders)&&r.refreshStoreOrders()},r.refreshStoreOrders=function(){r.props.setLoader();var e=r.props,t=e.getStoreOrders,n=e.match.params.store_id,o=e.currentUser.user.id,a=e.userRoles.admin,s=n&&a?n:o;r.setState({loadingOrders:!0}),t(s).then(function(e){r.setState({loadingOrders:!1}),r.props.removeLoader()}).catch(function(e){return console.log(e)})},r.handleBulkMailRes=function(e){var t=e.data.body.errors;(0,b.default)(t)?r.setState({selectedOrderShipments:e.data.body},function(){var e=r.state.selectedOrderShipments[0].shipping_label,t=function(){window.print(),setTimeout(function(){r.setState({selectedOrders:new Set,selectedOrderShipments:[]})},1e3)};(0,v.imageLoader)(e,t)}):Object.keys(t).map(function(e){r.props.setGrowler({kind:"warning",message:t[e][0].message})})},r.handleMessengerRes=function(e){r.props.setGrowler({kind:"success",message:"Messenger has been requested!"}),r.setState({selectedOrders:new Set})},r.alertCustomers=function(){var e=r.props,t=(e.userRoles,e.currentStore.id),n=r.state.selectedOrders;r.props.setLoader(),(0,O.alertCustomersPickup)(n,t).then(function(e){if(200===e.body.status){r.props.setGrowler({kind:"success",message:"Your customers have been notified to pick up their orders."}),r.props.removeLoader(),r.refreshStoreOrders(),r.setState({selectedOrders:new Set})}})},r.toggleOrderSelect=function(e){if(r.state.selectedOrders.has(e)){var t=r.state.selectedOrders;t.delete(e),r.setState({selectedOrders:t})}else{var n=r.state.selectedOrders;n.add(e),r.setState({selectedOrders:n})}},r.setOrderTabState=function(e){r.setState({showOrderState:e,selectedOrders:new Set})},r.markCustomerReceived=function(){var e=r.state.selectedOrders,t=r.props,n=t.currentStore.id,a=t.setLoader,s=t.removeLoader,l=t.setGrowler,u=[].concat(o(e)).map(function(e){return e.id});a(),(0,O.customerReceived)(u,n).then(function(e){s();l({kind:"success",message:"Order has been marked as Completed! You can now view it in the Archive."}),r.refreshStoreOrders(),r.setState({selectedOrders:new Set})}).catch(function(e){return console.log("err")})},r.sortOrdersByStatus=function(e){var t=r.props,n=t.openOrders,o=t.userRoles;switch(e){case"new_orders":return o.tailor?n.filter(function(e){return!(0,b.default)(e.shipments)&&e.tailor}):n.filter(function(e){var t=e.shipments,r=(0,b.default)(t),n=t[t.length-1],o=!e.fulfilled,a=t.length>0&&"messenger_shipment"===n.delivery_type&&"delivered"!=n.status;return o&&(r||a)});case"in_progress_orders":return o.tailor?n.filter(function(e){return e.arrived&&!e.fulfilled}):n.filter(function(e){if((0,b.default)(e.shipments))return!1;var t=e.tailor,r=e.fulfilled,n=e.shipments,o=n[n.length-1],a=o.status,s=o.delivery_type,l="mail_shipment"===s,u="delivered"===a;return(l||u)&&t&&!r});case"ready_orders":return n.filter(function(e){return e.fulfilled});default:return n}},r.state={showOrderState:"new_orders",selectedOrders:new Set,selectedOrderShipments:[],loadingOrders:!0},r}return l(t,e),u(t,[{key:"componentDidMount",value:function(){this.refreshStoreOrders(),(this.props.userRoles.retailer||this.props.userRoles.admin)&&(this.newInterval=setInterval(this.timer,1e4))}},{key:"componentWillUnmount",value:function(){clearInterval(this.newInterval)}},{key:"render",value:function(){if(!this.props.currentStore)return c.default.createElement(p.Redirect,{to:"/"});var e=this.props,t=e.userRoles,r=t.tailor,n=t.retailer,o=t.admin,a=e.userRoles,s=e.openOrders,l=this.state,u=l.loadingOrders,i=l.selectedOrders,d=l.selectedOrderShipments,f=l.showOrderState,h="Orders / "+this.props.currentStore.name;return n||o?c.default.createElement(w.default,{showOrderState:f,loadingOrders:u,headerText:h,openOrders:s,userRoles:a,selectedOrders:i,selectedOrderShipments:d,handleBulkMailRes:this.handleBulkMailRes,handleMessengerRes:this.handleMessengerRes,refreshStoreOrders:this.refreshStoreOrders,setOrderTabState:this.setOrderTabState,markCustomerReceived:this.markCustomerReceived,alertCustomers:this.alertCustomers,toggleOrderSelect:this.toggleOrderSelect,sortOrdersByStatus:this.sortOrdersByStatus}):r?c.default.createElement(E.default,{headerText:h,openOrders:s,loadingOrders:u,userRoles:a,sortOrdersByStatus:this.sortOrdersByStatus}):void 0}}]),t}(i.Component);k.propTypes={currentUser:m.default.object.isRequired,currentStore:m.default.object.isRequired,userRoles:m.default.object.isRequired,openOrders:m.default.array.isRequired,getStoreOrders:m.default.func.isRequired,setLoader:m.default.func.isRequired,removeLoader:m.default.func.isRequired,setGrowler:m.default.func.isRequired},t.default=(0,d.connect)(S,j)(k)},693:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){var t=e.onChange,r=e.checked,n=e.fieldName,a=e.text,s=e.name,l=e.labelClass;return n?o.default.createElement("div",{style:{display:"inline"}},o.default.createElement("input",{type:"checkbox",id:s+"-check",name:s,checked:r,onChange:function(){return t(n,!r)}}),o.default.createElement("label",{htmlFor:s+"-check",className:"checkbox-label"},o.default.createElement("span",null),a)):o.default.createElement("div",{style:{display:"inline"}},o.default.createElement("input",{type:"checkbox",id:s+"-check",name:s,checked:r,onChange:t}),o.default.createElement("label",{htmlFor:s+"-check",className:"checkbox-label "+l},o.default.createElement("span",null),a))};t.default=a},696:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrderStatus=void 0;var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=r(51),s=(t.getOrderStatus=function(e,t){var r=(e.shipments,e.arrived,e.late,e.due_date,e.fulfilled,e.customer_alerted,e.ship_to_store,t.retailer),n=t.admin,o=t.tailor,l=void 0,u=void 0;if((0,a.isEmpty)(e.shipments))l="Needs Transit",u="red";else if((0,a.isEmpty)(e.shipments)||e.arrived){if(e.late&&!e.fulfilled){if(n||o){var i=s(e.due_date,!0);l=i}else r&&(l="Delayed");u="red"}else if(e.fulfilled&&!e.customer_alerted)l="In Transit",u="gold";else if(e.fulfilled&&e.customer_alerted&&e.ship_to_store)l="Notified",u="red";else if(e.arrived&&!e.fulfilled){l=s(e.due_date,!1);var c=l.split("")[0];c>3?u="green":c>0?u="gold":c<1&&(u="red")}}else{var d=e.shipments[e.shipments.length-1],f=d.delivery_type;if("mail_shipment"===f)l="In Transit",u="gold";else if("messenger_shipment"===f){var p=d.status;"pending"===p?(l="Contacting",u="red"):"pickup"===p?(l="Picking Up",u="goldenrod"):"pickup_complete"===p||"dropoff"===p?(l="Dropping Off",u="gold"):"delivered"===p&&(l="Delivered",u="green")}}return{status:l,color:u}},function(e,t){var r=(0,o.default)(new Date),n=(0,o.default)(e);return(Math.abs(n.diff(r,"days"))+(t?" days late":" days to go")).toUpperCase()})},699:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),i=n(u),c=r(4),d=n(c),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.color,r=e.text,n=e.className;return i.default.createElement("div",{className:t+" status-card order-data-cell "+n},r)}}]),t}(u.Component);f.propTypes={color:d.default.string.isRequired,text:d.default.string.isRequired},t.default=f},715:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),i=function(e){function t(){var e,r,a,s;n(this,t);for(var l=arguments.length,i=Array(l),c=0;c<l;c++)i[c]=arguments[c];return r=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.orderHeader=function(e,t,r){return r?u.default.createElement("h3",{className:"order-select-header-cell"},e):t?u.default.createElement("h3",{className:"order-data-header-cell"},e):u.default.createElement("h3",{className:"order-header-cell-no-select"},e)},s=r,o(a,s)}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.showOrderState,t=void 0;return"new_orders"===e?t="Created":"in_progress_orders"===e?t="Checked In":"ready_orders"===e&&(t="Fulfilled"),u.default.createElement("div",{className:"order-headers-container"},u.default.createElement("div",{className:"order-headers-row"},this.orderHeader("Select:",!1,!0),u.default.createElement("div",{className:"order-data-headers-container"},this.orderHeader("Order",!0,!1),this.orderHeader(t,!0,!1),this.orderHeader("Customer",!0,!1),this.orderHeader("Status",!0,!1))))}}]),t}(l.Component);t.default=i},716:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),i=n(u),c=r(0),d=n(c),f=r(39),p=(n(f),r(8)),h=r(693),m=n(h),y=r(699),b=n(y),O=r(696),v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.userRoles,r=e.order,n=e.showOrderState,o=e.selectedOrders,a=e.toggleOrderSelect,s=r.id,l=r.customer,u=(r.alterations_count,r.created_at),c=r.arrival_date,f=r.fulfilled_date,h=l.first_name,y=l.last_name,v=(0,O.getOrderStatus)(r,t),_=v.color,w=v.status,g="/orders/"+s,E=o.has(r),S=function(){return a(r)},j=void 0;"new_orders"===n?j=u:"in_progress_orders"===n?j=c:"ready_orders"===n&&(j=f);var k=(0,d.default)(j),P=k.isSame(new Date,"day"),C=(0,d.default)(new Date).add(-1,"days"),N=k.isSame(C,"day"),R=P?"[Today,] h:mma":N?"[Yesterday,] h:mma":"MMM Do, h:mma",M=k.format(R);"Invalid date"!==M||c||(M="Pending");var T=i.default.createElement(m.default,{checked:E,type:"checkbox",name:s,onChange:S});return i.default.createElement("div",{className:"order-row",key:s},i.default.createElement("div",{className:"order-select-cell"},T),i.default.createElement(p.Link,{to:g,className:"order-row-link"},i.default.createElement("div",{className:"order-data-cell"},"#",s),i.default.createElement("div",{className:"order-data-cell"},M),i.default.createElement("div",{className:"order-data-cell"},h," ",y),i.default.createElement(b.default,{color:_,text:w})),i.default.createElement("div",{className:"order-data-break-row"}))}}]),t}(u.Component);t.default=v},717:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),i=n(u),c=r(39),d=n(c),f=r(716),p=n(f),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.openOrders,r=e.showOrderState,n=e.userRoles,o=e.loadingOrders,a=e.selectedOrders,s=e.toggleOrderSelect,l=e.sortOrdersByStatus;if(!(0,d.default)(t)){var u=l(r);return(0,d.default)(u)?i.default.createElement("div",{className:"table-row"},i.default.createElement("div",{className:"no-orders"},"No orders found!")):i.default.createElement("div",{className:"order-data-container"},u.map(function(e){return i.default.createElement(p.default,{key:e.id,order:e,userRoles:n,selectedOrders:a,toggleOrderSelect:s,showOrderState:r})}))}return o?i.default.createElement("div",{className:"table-row"},i.default.createElement("div",{className:"loading-orders"},"Loading Orders...")):i.default.createElement("div",null)}}]),t}(u.Component);t.default=h},718:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),i=n(u),c=r(39),d=n(c),f=function(e){function t(){var e,r,n,s;o(this,t);for(var l=arguments.length,u=Array(l),i=0;i<l;i++)u[i]=arguments[i];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.countOrdersByStatus=function(e){return n.sortOrdersByStatus(e).length},n.sortOrdersByStatus=function(e){var t=n.props,r=t.openOrders,o=t.userRoles;switch(e){case"new_orders":return o.tailor?r.filter(function(e){return!(0,d.default)(e.shipments)&&e.tailor}):r.filter(function(e){var t=e.shipments,r=(0,d.default)(t),n=t[t.length-1],o=!e.fulfilled,a=t.length>0&&"messenger_shipment"===n.delivery_type&&"delivered"!=n.status;return o&&(r||a)});case"in_progress_orders":return o.tailor?r.filter(function(e){return e.arrived&&!e.fulfilled}):r.filter(function(e){if((0,d.default)(e.shipments))return!1;var t=e.tailor,r=e.fulfilled,n=e.shipments,o=n[n.length-1],a=o.status,s=o.delivery_type,l="mail_shipment"===s,u="delivered"===a;return(l||u)&&t&&!r});case"ready_orders":return r.filter(function(e){return e.fulfilled});default:return r}},s=r,a(n,s)}return s(t,e),l(t,[{key:"render",value:function(){var e=this,t=[{className:"order-state-tab",status:"new_orders",text:"New Orders"},{className:"order-state-tab",status:"in_progress_orders",text:"In Process"},{className:"order-state-tab",status:"ready_orders",text:"In-Store Pickup"}],r=t.map(function(t,r){return t.status===e.props.showOrderState&&(t.className=t.className.concat(" selected")),i.default.createElement("div",{key:r,className:t.className,onClick:function(){return e.props.setOrderTabState(t.status)}},i.default.createElement("h3",null,t.text," (",e.countOrdersByStatus(t.status),")"))});return i.default.createElement("div",{className:"order-state-row"},r)}}]),t}(u.Component);t.default=f},719:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),c=n(i),d=r(322),f=n(d),p=r(718),h=n(p),m=r(715),y=n(m),b=r(717),O=n(b),v=r(725),_=n(v),w=r(724),g=n(w),E=function(e){function t(){var e,r,n,l;a(this,t);for(var u=arguments.length,i=Array(u),d=0;d<u;d++)i[d]=arguments[d];return r=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.mgmtControls=function(){var e=n.props,t=e.showOrderState,r=e.selectedOrders,a=e.selectedOrderShipments,s=e.handleBulkMailRes,l=e.handleMessengerRes,u=e.refreshStoreOrders,i=e.markCustomerReceived,d=e.alertCustomers;return"new_orders"===t?c.default.createElement(_.default,{selectedOrders:[].concat(o(r)),selectedOrderShipments:[].concat(o(a)),handleBulkMailRes:s,handleMessengerRes:l,refreshStoreOrders:u}):"ready_orders"===t?c.default.createElement(g.default,{selectedOrders:[].concat(o(r)),alertCustomers:d,markCustomerReceived:i}):void 0},l=r,s(n,l)}return l(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.headerText,r=e.showOrderState,n=e.openOrders,o=e.userRoles,a=e.loadingOrders,s=e.selectedOrders,l=e.setOrderTabState,u=e.toggleOrderSelect,i=e.sortOrdersByStatus;return c.default.createElement("div",null,c.default.createElement(f.default,{text:t}),c.default.createElement("div",{className:"orders"},c.default.createElement("div",{className:"order-state-container"},c.default.createElement(h.default,{userRoles:o,openOrders:n,showOrderState:r,setOrderTabState:l})),c.default.createElement("div",null,c.default.createElement(y.default,{showOrderState:r})),c.default.createElement("div",{className:"order-header-break-row"}),c.default.createElement("div",null,c.default.createElement(O.default,{showOrderState:r,openOrders:n,userRoles:o,loadingOrders:a,selectedOrders:s,toggleOrderSelect:u,sortOrdersByStatus:i})),c.default.createElement("div",null,this.mgmtControls())))}}]),t}(i.Component);t.default=E},720:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),i=function(e){function t(){var e,r,a,s;n(this,t);for(var l=arguments.length,i=Array(l),c=0;c<l;c++)i[c]=arguments[c];return r=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.renderHeaderCell=function(e,t,r){return r?u.default.createElement("h3",{className:"order-select-header-cell"},e):t?u.default.createElement("h3",{className:"order-data-header-cell"},e):u.default.createElement("h3",{className:"order-header-cell-no-select"},e)},s=r,o(a,s)}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"order-headers-container"},u.default.createElement("div",{className:"order-headers-row-no-select"},u.default.createElement("div",{className:"order-headers-container-no-select"},this.renderHeaderCell("Id",!1),this.renderHeaderCell("Status",!1),this.renderHeaderCell("Customer",!1),this.renderHeaderCell("Quantity",!1))))}}]),t}(l.Component);t.default=i},721:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),i=n(u),c=r(39),d=(n(c),r(8)),f=r(0),p=(n(f),r(696)),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.userRoles,r=e.order,n=e.order,o=n.id,a=n.alterations_count,s=n.customer,l=s.first_name,u=s.last_name,c=(0,p.getOrderStatus)(r,t),f=c.color,h=c.status,m="/orders/"+o;return i.default.createElement("div",{className:"order-row",key:o},i.default.createElement(d.Link,{to:m,className:"order-row-link-no-select"},i.default.createElement("div",{className:"order-cell-no-select"},"#",o),i.default.createElement("div",{style:{color:f},className:"order-cell-no-select"},h),i.default.createElement("div",{className:"order-cell-no-select"},l," ",u),i.default.createElement("div",{className:"order-cell-no-select"},a)),i.default.createElement("div",{className:"order-data-break-row"}))}}]),t}(u.Component);t.default=h},722:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),i=n(u),c=r(39),d=n(c),f=r(721),p=n(f),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.openOrders,r=e.sortOrdersByStatus,n=e.loadingOrders,o=e.userRoles;if((0,d.default)(t))return n?i.default.createElement("div",{className:"table-row"},i.default.createElement("div",{className:"loading-orders"},"Loading Orders...")):i.default.createElement("div",{className:"table-row"});var a=r("new_orders");return(0,d.default)(a)?i.default.createElement("div",{className:"table-row"},i.default.createElement("div",{className:"no-orders"},"No orders found!")):i.default.createElement("div",{className:"order-data-container"},a.map(function(e,t){return i.default.createElement(p.default,{order:e,userRoles:o,key:t})}))}}]),t}(u.Component);t.default=h},723:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),i=n(u),c=r(322),d=n(c),f=r(720),p=n(f),h=r(722),m=n(h),y=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.headerText,r=e.openOrders,n=e.loadingOrders,o=e.sortOrdersByStatus,a=e.userRoles;return i.default.createElement("div",null,i.default.createElement(d.default,{text:t}),i.default.createElement("div",{className:"orders"},i.default.createElement("div",null,i.default.createElement(p.default,null)),i.default.createElement("div",{className:"order-header-break-row"}),i.default.createElement("div",null,i.default.createElement(m.default,{openOrders:r,loadingOrders:n,sortOrdersByStatus:o,userRoles:a}))))}}]),t}(u.Component);t.default=y},724:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),i=n(u),c=r(326),d=n(c),f=function(e){function t(){var e,r,n,s;o(this,t);for(var l=arguments.length,u=Array(l),i=0;i<l;i++)u[i]=arguments[i];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.customerNotifiedSet=function(){var e=n.props.selectedOrders;return new Set(e.map(function(e){return e.customer_alerted}))},n.customerNotifiedDisabled=function(){var e=n.customerNotifiedSet();return e.size<1||e.has(!0)},n.customerPickupDisabled=function(){var e=n.customerNotifiedSet();return e.size<1||e.has(!1)},s=r,a(n,s)}return s(t,e),l(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"flex-container",style:{justifyContent:"space-around"}},i.default.createElement(d.default,{className:"send-order-button",onClick:this.props.alertCustomers,disabled:this.customerNotifiedDisabled(),text:"NOTIFY CUSTOMER"}),i.default.createElement(d.default,{className:"send-order-button",onClick:this.props.markCustomerReceived,disabled:this.customerPickupDisabled(),text:"CUSTOMER RECEIVED"}))}}]),t}(u.Component);t.default=f},725:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),c=n(i),d=r(15),f=r(19),p=r(326),h=n(p),m=r(726),y=n(m),b=r(329),O=n(b),v=r(327),_=r(25),w=function(e){return{userRoles:e.userRoles}},g=function(e){return(0,f.bindActionCreators)({setLoader:_.setLoader,removeLoader:_.removeLoader},e)},E=function(e){function t(e){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.hideShow=function(){var e=!r.state.showOptions;r.setState({showOptions:e})},r.handleSubmit=function(e){var t=r.props.selectedOrders,n=r.props,a=n.setLoader,s=n.removeLoader,l=n.userRoles,u=[].concat(o(t)).map(function(e){return e.id});a();var i=(0,v.shipmentActions)([].concat(o(t))[0],l);(0,_.createShipment)({shipment:{delivery_type:e,order_ids:u,shipment_action:i}}).then(function(t){s(),"mail_shipment"===e?r.props.handleBulkMailRes(t):r.props.handleMessengerRes(t)})},r.noSelectedOrders=function(e){return 0===e.length},r.state={showOptions:!1},r}return l(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.noSelectedOrders(e.selectedOrders),r=this.state.showOptions;t&&r&&(this.hideShow(),this.props.refreshStoreOrders())}},{key:"render",value:function(){var e=this.state.showOptions,t=this.props,r=t.selectedOrders,n=t.selectedOrderShipments,o=this.noSelectedOrders(r);return e?c.default.createElement("div",{className:"shipping-option-container"},c.default.createElement(y.default,{handleSubmit:this.handleSubmit,hideShow:this.hideShow}),c.default.createElement(O.default,{shipmentSet:n})):c.default.createElement("div",{className:"shipping-option-container"},c.default.createElement(h.default,{className:"send-order-button",onClick:this.hideShow,disabled:o,text:"SEND ORDER"}))}}]),t}(i.Component);t.default=(0,d.connect)(w,g)(E)},726:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),i=n(u),c=r(0),d=n(c),f=r(693),p=n(f),h=r(326),m=n(h),y=r(327),b=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.renderMessengerOption=function(){var t=(0,d.default)();if((0,y.messengerAvailable)(t))return i.default.createElement("div",{className:"shipping-option"},i.default.createElement("hr",{style:{float:"right",width:"85%",marginTop:"20px"}}),i.default.createElement(p.default,{name:"messenger_shipment",checked:"messenger_shipment"===e.state.selected,onChange:function(t){return e.updateSelected(t.target.name)},text:"Call Postmates Messenger (est. $13)",labelClass:"shipping-option-label"}))},e.state={selected:null},e}return s(t,e),l(t,[{key:"updateSelected",value:function(e){var t=this.state.selected,r=e===t?null:e;this.setState({selected:r})}},{key:"clearSelection",value:function(){this.setState({selected:null}),this.props.hideShow()}},{key:"render",value:function(){var e=this,t=this.state.selected,r=!t;return i.default.createElement("div",{style:{width:"380px",border:"3px solid #000033",borderRadius:"8px",padding:"30px",marginTop:"50px"}},i.default.createElement("div",{className:"shipping-option"},i.default.createElement(p.default,{name:"mail_shipment",checked:"mail_shipment"===t,onChange:function(t){return e.updateSelected(t.target.name)},text:"Print USPS Shipping Label (est. $6)",labelClass:"shipping-option-label"})),this.renderMessengerOption(),i.default.createElement("br",null),i.default.createElement("div",{className:"flex-container",style:{justifyContent:"space-between"}},i.default.createElement(m.default,{className:"send-order-button",onClick:this.props.hideShow,disabled:!1,text:"CANCEL"}),i.default.createElement(m.default,{className:"send-order-button",onClick:function(){return e.props.handleSubmit(t)},disabled:r,text:"SELECT"})))}}]),t}(u.Component);t.default=b}});