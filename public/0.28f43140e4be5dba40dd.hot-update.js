webpackHotUpdate(0,{

/***/ 354:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(2);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(5);\n\nvar _redux = __webpack_require__(7);\n\nvar _actions = __webpack_require__(8);\n\nvar _SelectGarment = __webpack_require__(355);\n\nvar _SelectGarment2 = _interopRequireDefault(_SelectGarment);\n\nvar _SectionHeader = __webpack_require__(19);\n\nvar _SectionHeader2 = _interopRequireDefault(_SectionHeader);\n\nvar _SelectAlterations = __webpack_require__(112);\n\nvar _SelectAlterations2 = _interopRequireDefault(_SelectAlterations);\n\nvar _Cart = __webpack_require__(350);\n\nvar _Cart2 = _interopRequireDefault(_Cart);\n\nvar _OrderDetails = __webpack_require__(353);\n\nvar _OrderDetails2 = _interopRequireDefault(_OrderDetails);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar OrdersNew = function (_Component) {\n  _inherits(OrdersNew, _Component);\n\n  function OrdersNew() {\n    _classCallCheck(this, OrdersNew);\n\n    var _this = _possibleConstructorReturn(this, (OrdersNew.__proto__ || Object.getPrototypeOf(OrdersNew)).call(this));\n\n    _this.state = {\n      stage: 1,\n      selectedGarment: null,\n      selectedAlterations: [],\n      selectedGarmentIndex: null\n    };\n\n    _this.selectGarment = _this.selectGarment.bind(_this);\n    _this.renderStageOne = _this.renderStageOne.bind(_this);\n    _this.addAlteration = _this.addAlteration.bind(_this);\n    _this.addToCart = _this.addToCart.bind(_this);\n    _this.renderOrderDetails = _this.renderOrderDetails.bind(_this);\n    _this.renderSelectAlerations = _this.renderSelectAlterations.bind(_this);\n    return _this;\n  }\n\n  _createClass(OrdersNew, [{\n    key: 'selectGarment',\n    value: function selectGarment(garment) {\n      this.setState({ selectedGarment: garment, stage: 2 });\n    }\n  }, {\n    key: 'renderStageOne',\n    value: function renderStageOne() {\n      this.setState({\n        selectedGarment: null,\n        selectedAlterations: [],\n        stage: 1,\n        selectedGarmentIndex: null }); //, notes: ''});\n    }\n  }, {\n    key: 'renderSelectAlterations',\n    value: function renderSelectAlterations(index, garment, alterations) {\n      delete garment.alterations;\n\n      console.log('renderSelectAlterations', garment);\n      this.setState({\n        selectedGarment: garment,\n        selectedAlterations: alterations,\n        selectedGarmentIndex: index,\n        stage: 2\n      });\n    }\n  }, {\n    key: 'renderOrderDetails',\n    value: function renderOrderDetails() {\n      this.setState({ stage: 3 });\n    }\n  }, {\n    key: 'alterationsIncludeNewSelection',\n    value: function alterationsIncludeNewSelection(newSelectedAlterations, alteration) {\n      for (var i = 0; i < newSelectedAlterations.length; i++) {\n        if (newSelectedAlterations[i] === alteration) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }, {\n    key: 'addAlteration',\n    value: function addAlteration(alteration) {\n      console.log('addAlteration');\n      var newSelectedAlterations = this.state.selectedAlterations;\n      var newList = void 0;\n      if (!this.alterationsIncludeNewSelection(newSelectedAlterations, alteration)) {\n        newList = newSelectedAlterations;\n        newList.push(alteration);\n      } else {\n        newList = newSelectedAlterations.filter(function (alt) {\n          return alt.id !== alteration.id;\n        });\n      }\n      this.setState({ selectedAlterations: newList });\n    }\n  }, {\n    key: 'addToCart',\n    value: function addToCart() {\n      var _state = this.state,\n          selectedGarment = _state.selectedGarment,\n          selectedAlterations = _state.selectedAlterations;\n\n      var garmentForCart = this.state.selectedGarment;\n      garmentForCart.alterations = selectedAlterations;\n      this.props.addGarmentToCart(garmentForCart);\n      this.renderStageOne();\n    }\n  }, {\n    key: 'updateGarment',\n    value: function updateGarment() {\n      var _state2 = this.state,\n          selectedGarment = _state2.selectedGarment,\n          selectedGarmentIndex = _state2.selectedGarmentIndex,\n          selectedAlterations = _state2.selectedAlterations;\n\n      var garmentForCart = this.state.selectedGarment;\n      garmentForCart.alterations = selectedAlterations;\n      this.props.setGarment(garmentForCart, selectedGarmentIndex);\n      this.setState({ stage: 1, selectedGarmentIndex: null, selectedGarment: null, selectedAlterations: [] });\n    }\n  }, {\n    key: 'renderStage',\n    value: function renderStage(stage) {\n      switch (this.state.stage) {\n        case 1:\n          return _react2.default.createElement(_SelectGarment2.default, {\n            handleSelect: this.selectGarment,\n            garments: this.props.garments });\n          break;\n        case 2:\n          return _react2.default.createElement(_SelectAlterations2.default, {\n            addToCart: this.addToCart,\n            handleSelect: this.addAlteration,\n            renderOrderDetails: this.renderOrderDetails,\n            selectedAlterations: this.state.selectedAlterations.map(function (alt) {\n              return alt.id;\n            }),\n            renderStageOne: this.renderStageOne,\n            garmentIndex: this.state.selectedGarmentIndex,\n            updateGarment: this.updateGarment.bind(this),\n            garment: this.state.selectedGarment });\n          break;\n        case 3:\n          return _react2.default.createElement(_OrderDetails2.default, null);\n          break;\n        case 4:\n          return _react2.default.createElement(OrderConfirmation, null);\n          break;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!this.state.selectedGarment && this.props.match.params.index) {\n        //this.editGarment();\n      }\n      console.log('garments', this.props.cart.garments.length);\n      if (this.props.cart.garments.length > 0) {\n        console.log('alterations', this.props.cart.garments[0].alterations.length);\n      }\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(_SectionHeader2.default, {\n          text: 'New Order',\n          rotate: 'rotate',\n          link: '/',\n          showCart: true }),\n        _react2.default.createElement(\n          'div',\n          { className: 'new-order-content' },\n          _react2.default.createElement(\n            'div',\n            { className: 'stage-section' },\n            this.renderStage(this.state.stage)\n          ),\n          _react2.default.createElement(_Cart2.default, {\n            renderSelectAlterations: this.renderSelectAlterations.bind(this),\n            selectGarmrent: this.selectGarment,\n            stage: this.state.stage,\n            renderOrderDetails: this.renderOrderDetails })\n        )\n      );\n    }\n  }]);\n\n  return OrdersNew;\n}(_react.Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.currentUser,\n    currentStore: store.currentStore,\n    cart: store.cart,\n    garments: store.garments.garments\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return (0, _redux.bindActionCreators)({ addGarmentToCart: _actions.addGarmentToCart, setGarment: _actions.setGarment }, dispatch);\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(OrdersNew);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jbGllbnQvY29tcG9uZW50cy9vcmRlcnMvbmV3L09yZGVyc05ldy5qcz8xMzZiIl0sIm5hbWVzIjpbIk9yZGVyc05ldyIsInN0YXRlIiwic3RhZ2UiLCJzZWxlY3RlZEdhcm1lbnQiLCJzZWxlY3RlZEFsdGVyYXRpb25zIiwic2VsZWN0ZWRHYXJtZW50SW5kZXgiLCJzZWxlY3RHYXJtZW50IiwiYmluZCIsInJlbmRlclN0YWdlT25lIiwiYWRkQWx0ZXJhdGlvbiIsImFkZFRvQ2FydCIsInJlbmRlck9yZGVyRGV0YWlscyIsInJlbmRlclNlbGVjdEFsZXJhdGlvbnMiLCJyZW5kZXJTZWxlY3RBbHRlcmF0aW9ucyIsImdhcm1lbnQiLCJzZXRTdGF0ZSIsImluZGV4IiwiYWx0ZXJhdGlvbnMiLCJjb25zb2xlIiwibG9nIiwibmV3U2VsZWN0ZWRBbHRlcmF0aW9ucyIsImFsdGVyYXRpb24iLCJpIiwibGVuZ3RoIiwibmV3TGlzdCIsImFsdGVyYXRpb25zSW5jbHVkZU5ld1NlbGVjdGlvbiIsInB1c2giLCJmaWx0ZXIiLCJhbHQiLCJpZCIsImdhcm1lbnRGb3JDYXJ0IiwicHJvcHMiLCJhZGRHYXJtZW50VG9DYXJ0Iiwic2V0R2FybWVudCIsImdhcm1lbnRzIiwibWFwIiwidXBkYXRlR2FybWVudCIsIm1hdGNoIiwicGFyYW1zIiwiY2FydCIsInJlbmRlclN0YWdlIiwibWFwU3RhdGVUb1Byb3BzIiwic3RvcmUiLCJjdXJyZW50VXNlciIsImN1cnJlbnRTdG9yZSIsIm1hcERpc3BhdGNoVG9Qcm9wcyIsImRpc3BhdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7O0lBRU1BLFM7OztBQUNKLHVCQUFhO0FBQUE7O0FBQUE7O0FBRVgsVUFBS0MsS0FBTCxHQUFhO0FBQ1hDLGFBQU8sQ0FESTtBQUVYQyx1QkFBaUIs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LFNBQU8sK0JBQW1CLEVBQUNkLDJDQUFELEVBQW1CQywrQkFBbkIsRUFBbkIsRUFBbURhLFFBQW5ELENBQVA7QUFDRCxDQUZEOztrQkFJZSx5QkFBUUwsZUFBUixFQUF5Qkksa0JBQXpCLEVBQTZDN0MsU0FBN0MsQyIsImZpbGUiOiIzNTQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQge2JpbmRBY3Rpb25DcmVhdG9yc30gZnJvbSAncmVkdXgnO1xuaW1wb3J0IHthZGRHYXJtZW50VG9DYXJ0LCBzZXRHYXJtZW50fSBmcm9tICcuLi8uLi8uLi9hY3Rpb25zJztcbmltcG9ydCBTZWxlY3RHYXJtZW50IGZyb20gJy4vU2VsZWN0R2FybWVudCc7XG5pbXBvcnQgU2VjdGlvbkhlYWRlciBmcm9tICcuLi8uLi9TZWN0aW9uSGVhZGVyJztcbmltcG9ydCBTZWxlY3RBbHRlcmF0aW9ucyBmcm9tICcuL1NlbGVjdEFsdGVyYXRpb25zJztcbmltcG9ydCBDYXJ0IGZyb20gJy4vQ2FydCc7XG5pbXBvcnQgT3JkZXJEZXRhaWxzIGZyb20gJy4vT3JkZXJEZXRhaWxzJztcblxuY2xhc3MgT3JkZXJzTmV3IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzdGFnZTogMSxcbiAgICAgIHNlbGVjdGVkR2FybWVudDogbnVsbCxcbiAgICAgIHNlbGVjdGVkQWx0ZXJhdGlvbnM6IFtdLFxuICAgICAgc2VsZWN0ZWRHYXJtZW50SW5kZXg6IG51bGxcbiAgICB9XG5cbiAgICB0aGlzLnNlbGVjdEdhcm1lbnQgPSB0aGlzLnNlbGVjdEdhcm1lbnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlbmRlclN0YWdlT25lID0gdGhpcy5yZW5kZXJTdGFnZU9uZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWRkQWx0ZXJhdGlvbiA9IHRoaXMuYWRkQWx0ZXJhdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWRkVG9DYXJ0ID0gdGhpcy5hZGRUb0NhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlbmRlck9yZGVyRGV0YWlscyA9IHRoaXMucmVuZGVyT3JkZXJEZXRhaWxzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW5kZXJTZWxlY3RBbGVyYXRpb25zID0gdGhpcy5yZW5kZXJTZWxlY3RBbHRlcmF0aW9ucy5iaW5kKHRoaXMpO1xuICB9XG5cblxuICBzZWxlY3RHYXJtZW50KGdhcm1lbnQpe1xuICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkR2FybWVudDogZ2FybWVudCwgc3RhZ2U6IDJ9KTtcbiAgfVxuXG4gIHJlbmRlclN0YWdlT25lKCl7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzZWxlY3RlZEdhcm1lbnQ6IG51bGwsIFxuICAgICAgc2VsZWN0ZWRBbHRlcmF0aW9uczogW10sIFxuICAgICAgc3RhZ2U6IDEsIFxuICAgICAgc2VsZWN0ZWRHYXJtZW50SW5kZXg6IG51bGx9KS8vLCBub3RlczogJyd9KTtcbiAgfVxuXG4gIHJlbmRlclNlbGVjdEFsdGVyYXRpb25zKGluZGV4LCBnYXJtZW50LCBhbHRlcmF0aW9ucyl7XG4gICAgZGVsZXRlIGdhcm1lbnQuYWx0ZXJhdGlvbnNcblxuICAgIGNvbnNvbGUubG9nKCdyZW5kZXJTZWxlY3RBbHRlcmF0aW9ucycsIGdhcm1lbnQpO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgIHNlbGVjdGVkR2FybWVudDogZ2FybWVudCwgXG4gICAgICBzZWxlY3RlZEFsdGVyYXRpb25zOiBhbHRlcmF0aW9ucyxcbiAgICAgIHNlbGVjdGVkR2FybWVudEluZGV4OiBpbmRleCxcbiAgICAgIHN0YWdlOiAyXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJPcmRlckRldGFpbHMoKXtcbiAgICB0aGlzLnNldFN0YXRlKHtzdGFnZTogM30pO1xuICB9XG5cblxuICBhbHRlcmF0aW9uc0luY2x1ZGVOZXdTZWxlY3Rpb24obmV3U2VsZWN0ZWRBbHRlcmF0aW9ucywgYWx0ZXJhdGlvbil7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdTZWxlY3RlZEFsdGVyYXRpb25zLmxlbmd0aDsgaSsrKXtcbiAgICAgIGlmIChuZXdTZWxlY3RlZEFsdGVyYXRpb25zW2ldID09PSBhbHRlcmF0aW9uKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYWRkQWx0ZXJhdGlvbihhbHRlcmF0aW9uKXtcbiAgICBjb25zb2xlLmxvZygnYWRkQWx0ZXJhdGlvbicpO1xuICAgIGNvbnN0IG5ld1NlbGVjdGVkQWx0ZXJhdGlvbnMgPSB0aGlzLnN0YXRlLnNlbGVjdGVkQWx0ZXJhdGlvbnM7XG4gICAgbGV0IG5ld0xpc3Q7XG4gICAgaWYgKCF0aGlzLmFsdGVyYXRpb25zSW5jbHVkZU5ld1NlbGVjdGlvbihuZXdTZWxlY3RlZEFsdGVyYXRpb25zLCBhbHRlcmF0aW9uKSkge1xuICAgICAgbmV3TGlzdCA9IG5ld1NlbGVjdGVkQWx0ZXJhdGlvbnM7XG4gICAgICBuZXdMaXN0LnB1c2goYWx0ZXJhdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0xpc3QgPSBuZXdTZWxlY3RlZEFsdGVyYXRpb25zLmZpbHRlcihhbHQgPT4gYWx0LmlkICE9PSBhbHRlcmF0aW9uLmlkKTtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRBbHRlcmF0aW9uczogbmV3TGlzdH0pO1xuICB9XG5cbiAgYWRkVG9DYXJ0KCl7XG4gICAgY29uc3Qge3NlbGVjdGVkR2FybWVudCwgc2VsZWN0ZWRBbHRlcmF0aW9uc30gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGdhcm1lbnRGb3JDYXJ0ID0gdGhpcy5zdGF0ZS5zZWxlY3RlZEdhcm1lbnQ7XG4gICAgZ2FybWVudEZvckNhcnQuYWx0ZXJhdGlvbnMgPSBzZWxlY3RlZEFsdGVyYXRpb25zO1xuICAgIHRoaXMucHJvcHMuYWRkR2FybWVudFRvQ2FydChnYXJtZW50Rm9yQ2FydCk7XG4gICAgdGhpcy5yZW5kZXJTdGFnZU9uZSgpO1xuICB9XG5cbiAgdXBkYXRlR2FybWVudCgpe1xuICAgIGNvbnN0IHtzZWxlY3RlZEdhcm1lbnQsIHNlbGVjdGVkR2FybWVudEluZGV4LCBzZWxlY3RlZEFsdGVyYXRpb25zfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgZ2FybWVudEZvckNhcnQgPSB0aGlzLnN0YXRlLnNlbGVjdGVkR2FybWVudDtcbiAgICBnYXJtZW50Rm9yQ2FydC5hbHRlcmF0aW9ucyA9IHNlbGVjdGVkQWx0ZXJhdGlvbnM7XG4gICAgdGhpcy5wcm9wcy5zZXRHYXJtZW50KGdhcm1lbnRGb3JDYXJ0LCBzZWxlY3RlZEdhcm1lbnRJbmRleCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7c3RhZ2U6IDEsIHNlbGVjdGVkR2FybWVudEluZGV4OiBudWxsLCBzZWxlY3RlZEdhcm1lbnQ6IG51bGwsIHNlbGVjdGVkQWx0ZXJhdGlvbnM6IFtdfSk7XG4gIH1cblxuICByZW5kZXJTdGFnZShzdGFnZSl7XG4gICAgc3dpdGNoICh0aGlzLnN0YXRlLnN0YWdlKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiA8U2VsZWN0R2FybWVudFxuICAgICAgICAgICAgICAgICBoYW5kbGVTZWxlY3Q9e3RoaXMuc2VsZWN0R2FybWVudH1cbiAgICAgICAgICAgICAgICAgZ2FybWVudHM9e3RoaXMucHJvcHMuZ2FybWVudHN9IC8+XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gPFNlbGVjdEFsdGVyYXRpb25zXG4gICAgICAgICAgICAgICAgIGFkZFRvQ2FydD17dGhpcy5hZGRUb0NhcnR9XG4gICAgICAgICAgICAgICAgIGhhbmRsZVNlbGVjdD17dGhpcy5hZGRBbHRlcmF0aW9ufVxuICAgICAgICAgICAgICAgICByZW5kZXJPcmRlckRldGFpbHM9e3RoaXMucmVuZGVyT3JkZXJEZXRhaWxzfVxuICAgICAgICAgICAgICAgICBzZWxlY3RlZEFsdGVyYXRpb25zPXt0aGlzLnN0YXRlLnNlbGVjdGVkQWx0ZXJhdGlvbnMubWFwKGFsdCA9PiBhbHQuaWQpfVxuICAgICAgICAgICAgICAgICByZW5kZXJTdGFnZU9uZT17dGhpcy5yZW5kZXJTdGFnZU9uZX1cbiAgICAgICAgICAgICAgICAgZ2FybWVudEluZGV4PXt0aGlzLnN0YXRlLnNlbGVjdGVkR2FybWVudEluZGV4fVxuICAgICAgICAgICAgICAgICB1cGRhdGVHYXJtZW50PXt0aGlzLnVwZGF0ZUdhcm1lbnQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgZ2FybWVudD17dGhpcy5zdGF0ZS5zZWxlY3RlZEdhcm1lbnR9IC8+XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gPE9yZGVyRGV0YWlscyAvPlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgcmV0dXJuIDxPcmRlckNvbmZpcm1hdGlvbiAvPlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKXtcbiAgICBpZiAoIXRoaXMuc3RhdGUuc2VsZWN0ZWRHYXJtZW50ICYmIHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmluZGV4KXtcbiAgICAgIC8vdGhpcy5lZGl0R2FybWVudCgpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnZ2FybWVudHMnLCB0aGlzLnByb3BzLmNhcnQuZ2FybWVudHMubGVuZ3RoKVxuICAgIGlmICh0aGlzLnByb3BzLmNhcnQuZ2FybWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coJ2FsdGVyYXRpb25zJywgdGhpcy5wcm9wcy5jYXJ0Lmdhcm1lbnRzWzBdLmFsdGVyYXRpb25zLmxlbmd0aCk7XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8U2VjdGlvbkhlYWRlciBcbiAgICAgICAgICB0ZXh0PSdOZXcgT3JkZXInIFxuICAgICAgICAgIHJvdGF0ZT17J3JvdGF0ZSd9XG4gICAgICAgICAgbGluaz17Jy8nfVxuICAgICAgICAgIHNob3dDYXJ0PXt0cnVlfSAvPlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXctb3JkZXItY29udGVudCc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3N0YWdlLXNlY3Rpb24nPlxuICAgICAgICAgICAge3RoaXMucmVuZGVyU3RhZ2UodGhpcy5zdGF0ZS5zdGFnZSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPENhcnQgXG4gICAgICAgICAgICByZW5kZXJTZWxlY3RBbHRlcmF0aW9ucz17dGhpcy5yZW5kZXJTZWxlY3RBbHRlcmF0aW9ucy5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgc2VsZWN0R2FybXJlbnQ9e3RoaXMuc2VsZWN0R2FybWVudH0gXG4gICAgICAgICAgICBzdGFnZT17dGhpcy5zdGF0ZS5zdGFnZX0gXG4gICAgICAgICAgICByZW5kZXJPcmRlckRldGFpbHM9e3RoaXMucmVuZGVyT3JkZXJEZXRhaWxzfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0b3JlKSA9PiB7XG4gIHJldHVybiB7XG4gICAgY3VycmVudFVzZXI6IHN0b3JlLmN1cnJlbnRVc2VyLFxuICAgIGN1cnJlbnRTdG9yZTogc3RvcmUuY3VycmVudFN0b3JlLFxuICAgIGNhcnQ6IHN0b3JlLmNhcnQsXG4gICAgZ2FybWVudHM6IHN0b3JlLmdhcm1lbnRzLmdhcm1lbnRzXG4gIH1cbn1cblxuY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0gKGRpc3BhdGNoKSA9PiB7XG4gIHJldHVybiBiaW5kQWN0aW9uQ3JlYXRvcnMoe2FkZEdhcm1lbnRUb0NhcnQsIHNldEdhcm1lbnR9LCBkaXNwYXRjaCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKE9yZGVyc05ldyk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jbGllbnQvY29tcG9uZW50cy9vcmRlcnMvbmV3L09yZGVyc05ldy5qcyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ })

})